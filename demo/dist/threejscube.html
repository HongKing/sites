<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><title>three.js cube</title><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/fontello.css"><link rel="stylesheet" href="../css/style.css"></head><body><div class="content"><a class="github" href="https://github.com/edwardzhong"><img src="../img/github.png"></a><header class="header"><h1><a href="../index.html">Jeff Zhong's Demo</a></h1></header><div class="main grid"><a class="effect-list" href="../index.html">&larr;&nbsp;effect list</a><h2>three.js cube</h2><div style="padding:10px 0;"><label for="side">select side: &nbsp;<select id="side" name="side" style="outline: none;"><option value="0">front</option><option value="1">left</option><option value="2">back</option><option value="3">right</option><option value="4">top</option><option value="5">bottom</option></select></label><label for="color">set color: &nbsp;</label><input id="color" type="color" name="color"><label for="img">add image: &nbsp;</label><input id="img" type="file" name="img"></div><div id="container"></div></div><footer class="footer"><p> Copyright &copy; 2017 <a href="https://github.com/edwardzhong">Jeff Zhong</a></p></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/109/three.min.js"></script><script>(function(){'use strict';var f=Math.PI,g=Math.floor;function a(a,b,c){const d=new h(3);return a&&(d[0]=a),b&&(d[1]=b),c&&(d[2]=c),d}function b(){var a=g(360*Math.random()),b=g(50*Math.random()+50),c=g(20*Math.random()+40);return[a,b,c]}function c(){u.render(v,w)}function d(a,e,b,c,d){return"undefined"==typeof d&&(d=1.2),b*((a=a/c-1)*a*((d+1)*a+d)+1)+e}function e(a){const[b,e]=a,f=new Date,g=600,h=z.rotation.x,i=z.rotation.y;console.log(z),~function a(){const j=new Date-f;j>g||(z.rotation.x=d(j,h,b-h,g),z.rotation.y=d(j,i,e-i,g),c(),requestAnimationFrame(a))}()}let h=Float32Array;const i=a(),j=a(),k=a(),l=document.getElementById("side"),m=document.getElementById("color"),n=document.getElementById("img"),o=document.getElementById("container"),p=400,q=400;var r=4;const s=[{name:"front",side:4,pos:[0,0,1],rotate:[0,0]},{name:"left",side:1,pos:[-1,0,0],rotate:[0,f/2]},{name:"back",side:5,pos:[0,0,-1],rotate:[0,f]},{name:"right",side:0,pos:[1,0,0],rotate:[0,-f/2]},{name:"top",side:2,pos:[0,1,0],rotate:[f/2,0]},{name:"bottom",side:3,pos:[0,-1,0],rotate:[-f/2,0]}],t=[new THREE.Plane(new THREE.Vector3(1,0,0),2.01),new THREE.Plane(new THREE.Vector3(-1,0,0),2.01),new THREE.Plane(new THREE.Vector3(0,1,0),2.01),new THREE.Plane(new THREE.Vector3(0,-1,0),2.01),new THREE.Plane(new THREE.Vector3(0,0,1),2.01),new THREE.Plane(new THREE.Vector3(0,0,-1),2.01)],u=new THREE.WebGLRenderer,v=new THREE.Scene;v.background=new THREE.Color("hsl(0, 0%, 95%)");const w=new THREE.PerspectiveCamera(45,p/q,.1,100);v.add(w),v.add(new THREE.AmbientLight(6316128)),w.position.set(4,6,8),w.lookAt(0,0,0);const x=new THREE.PointLight(16777215,1,100);x.position.set(-2,5,8),v.add(x);const y=new THREE.DirectionalLight(16777215,1);y.position.set(4,1,6),v.add(y);const z=new THREE.Group,A=new THREE.BoxBufferGeometry(4,4,4),B=[new THREE.MeshLambertMaterial,new THREE.MeshLambertMaterial,new THREE.MeshLambertMaterial,new THREE.MeshLambertMaterial,new THREE.MeshLambertMaterial,new THREE.MeshLambertMaterial],C=new THREE.Mesh(A,B);z.add(C);const D=new THREE.EdgesGeometry(A),E=new THREE.LineSegments(D,new THREE.LineBasicMaterial({color:12303291,linewidth:4,linecap:"round",linejoin:"round"}));z.add(E),v.add(z),u.localClippingEnabled=!0,u.antialias=!0,u.setPixelRatio(window.devicePixelRatio),u.setSize(p,q),o.appendChild(u.domElement),u.render(v,w),new THREE.FontLoader().load("./helvetiker_regular.typeface.json",a=>{const d=2.0002;s.forEach(c=>{let[e,f,g]=b(),h=new THREE.MeshLambertMaterial({color:new THREE.Color(`hsl(${e},${f}%,${g}%)`)}),i=a.generateShapes(`${c.name}\nThree.js\nFill text.`,.5),j=new THREE.ShapeBufferGeometry(i);j.computeBoundingBox();const k=-.5*(j.boundingBox.max.x-j.boundingBox.min.x);j.translate(k,.5,0);let l=new THREE.Mesh(j,h);l.rotation.x=-c.rotate[0],l.rotation.y=-c.rotate[1],l.position.set(c.pos[0]*d,c.pos[1]*d,c.pos[2]*d),z.add(l)}),c()}),l.onchange=function(){const a=this.value,b=s[parseInt(a,10)];e(b.rotate),r=b.side},m.onchange=function(){const a=this.value;C.material[r].color=new THREE.Color(a),c()},n.onchange=function(a){const b=a.target.files[0];if(b){if(-1===b.type.indexOf("image"))return void alert("\u8BF7\u9009\u62E9\u56FE\u7247\uFF01");if(2e3<g(b.size/1024))return void alert("\u4E0A\u4F20\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 2M\uFF01");if(!window.FileReader)return void alert("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u4E0A\u4F20\uFF01");const a=new FileReader;a.onloadend=function(a){new THREE.TextureLoader().load(a.target.result,a=>{console.log(a);const b=s.filter(a=>a.side==r)[0],d=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),new THREE.MeshBasicMaterial({map:a})),e=2.0001;d.rotation.x=-b.rotate[0],d.rotation.y=-b.rotate[1],d.position.set(b.pos[0]*e,b.pos[1]*e,b.pos[2]*e),z.add(d),c()})},a.readAsDataURL(b)}}})();
</script></body></html>