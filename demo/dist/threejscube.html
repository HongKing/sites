<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><title>three.js cube</title><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/fontello.css"><link rel="stylesheet" href="../css/style.css"></head><body><div class="content"><a class="github" href="https://github.com/edwardzhong"><img src="../img/github.png"></a><header class="header"><h1><a href="../index.html">Jeff Zhong's Demo</a></h1></header><div class="main grid"><a class="effect-list" href="../index.html">&larr;&nbsp;effect list</a><h2>three.js cube</h2><div style="padding:10px 0;"><label for="side">select side: &nbsp;<select id="side" name="side" style="outline: none;"><option value="0">front</option><option value="1">left</option><option value="2">back</option><option value="3">right</option><option value="4">top</option><option value="5">bottom</option></select></label><label for="color">set color: &nbsp;</label><input id="color" type="color" name="color"><label for="img">add image: &nbsp;</label><input id="img" type="file" name="img"></div><div id="container"></div></div><footer class="footer"><p> Copyright &copy; 2017 <a href="https://github.com/edwardzhong">Jeff Zhong</a></p></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/109/three.min.js"></script><script>(function(){'use strict';var e=Math.PI;function a(a){var b=document.createElement("canvas");b.width=512,b.height=256;var c=b.getContext("2d");return c.fillStyle="#dddddd",c.fillRect(0,0,512,256),c.font="50px \" bold",c.fillStyle="hsl(200,0%,30%)",c.textAlign="center",c.textBaseline="middle",c.fillText(a,256,128),b}function b(){l.render(m,n)}function c(a,e,b,c,d){return"undefined"==typeof d&&(d=1.70158),b*((a=a/c-1)*a*((d+1)*a+d)+1)+e}function d(a){const[d,e]=a,f=new Date,g=1e3,h=s.rotation.x,i=s.rotation.y;~function a(){const j=new Date-f;j>g||(s.rotation.x=u.rotation.x=c(j,h,d-h,g),s.rotation.y=u.rotation.y=c(j,i,e-i,g),b(),requestAnimationFrame(a))}()}const f=document.getElementById("side"),g=document.getElementById("color"),h=document.getElementById("img"),i=document.getElementById("container"),j=600,k=400,l=new THREE.WebGLRenderer,m=new THREE.Scene;m.background=new THREE.Color("hsl(0, 0%, 95%)");const n=new THREE.PerspectiveCamera(45,j/k,.1,100);m.add(n),m.add(new THREE.AmbientLight(6316128)),n.position.set(4,6,8),n.lookAt(0,0,0);const o=new THREE.PointLight(16777215,1,100);o.position.set(-2,5,8),m.add(o);const p=new THREE.DirectionalLight(16777215,1);p.position.set(4,1,6),m.add(p);const q=new THREE.BoxBufferGeometry(4,4,4),r=[new THREE.MeshLambertMaterial({map:new THREE.CanvasTexture(a("Right"))}),new THREE.MeshLambertMaterial({map:new THREE.CanvasTexture(a("Left"))}),new THREE.MeshLambertMaterial({map:new THREE.CanvasTexture(a("Top"))}),new THREE.MeshLambertMaterial({map:new THREE.CanvasTexture(a("Botom"))}),new THREE.MeshLambertMaterial({map:new THREE.CanvasTexture(a("Front"))}),new THREE.MeshLambertMaterial({map:new THREE.CanvasTexture(a("Back"))})],s=new THREE.Mesh(q,r);m.add(s);const t=new THREE.EdgesGeometry(q),u=new THREE.LineSegments(t,new THREE.LineBasicMaterial({color:12303291,linewidth:10,linecap:"round",linejoin:"round"}));m.add(u),l.setPixelRatio(window.devicePixelRatio),l.setSize(j,k),i.appendChild(l.domElement),l.render(m,n),console.log(s);var v=4,w=[{side:4,pos:[0,0,1],rotate:[0,0]},{side:1,pos:[-1,0,0],rotate:[0,e/2]},{side:5,pos:[0,0,-1],rotate:[0,e]},{side:0,pos:[1,0,0],rotate:[0,-e/2]},{side:2,pos:[0,1,0],rotate:[e/2,0]},{side:3,pos:[0,-1,0],rotate:[-e/2,0]}];f.onchange=function(){const a=this.value,b=w[parseInt(a,10)];d(b.rotate),v=b.side},g.onchange=function(){const a=this.value;s.material[v].color=new THREE.Color(a),b()},h.onchange=function(a){var c=Math.floor;const d=a.target.files[0];if(d){if(-1===d.type.indexOf("image"))return void alert("\u8BF7\u9009\u62E9\u56FE\u7247\uFF01");if(2e3<c(d.size/1024))return void alert("\u4E0A\u4F20\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 2M\uFF01");if(!window.FileReader)return void alert("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u4E0A\u4F20\uFF01");const a=new FileReader;a.onloadend=function(a){new THREE.TextureLoader().load(a.target.result,a=>{console.log(a);const c=w.filter(a=>a.side==v)[0],d=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),new THREE.MeshBasicMaterial({map:a})),e=2.0001;d.rotation.x=-c.rotate[0],d.rotation.y=-c.rotate[1],d.position.set(c.pos[0]*e,c.pos[1]*e,c.pos[2]*e),s.add(d),b()})},a.readAsDataURL(d)}}})();
</script></body></html>