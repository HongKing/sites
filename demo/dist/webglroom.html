<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><title>dinning hall</title><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/fontello.css"><link rel="stylesheet" href="../css/style.css"></head><body><div class="content"><a class="github" href="https://github.com/edwardzhong"><img src="../img/github.png"></a><header class="header"><h1><a href="../index.html">Jeff Zhong's Demo</a></h1></header><div class="main grid"><a class="effect-list" href="../index.html">&larr;&nbsp;effect list</a><h2>dinning hall</h2><h3></h3><p>拖动鼠标可旋转和缩放画面</p><canvas id="canvas" width="800" height="600"></canvas></div><footer class="footer"><p> Copyright &copy; 2017 <a href="https://github.com/edwardzhong">Jeff Zhong</a></p></footer></div><script>(function(){'use strict';var he=Math.round,_e=Math.sin,ye=Math.cos,Ee=Math.PI,Te=Math.sqrt;function e(e,t,r){const i=new Ae(3);return e&&(i[0]=e),t&&(i[1]=t),r&&(i[2]=r),i}function t(e,t,r){return r=r||new Ae(3),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function r(e,t,r){return r=r||new Ae(3),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function i(e,t,r){r=r||new Ae(3);const i=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=i,r[2]=a,r}function a(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function o(e){return Te(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function n(e,t){t=t||new Ae(3);const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Te(r);return 1e-5<i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=0,t[1]=0,t[2]=0),t}function s(e,t){return t=t||new Ae(3),t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function d(e){return e=e||new Le(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){t=t||new Le(16);const r=e[0],i=e[1],a=e[2],o=e[3],n=e[4],s=e[5],l=e[6],u=e[7],m=e[8],c=e[9],p=e[10],f=e[11],v=e[12],x=e[13],b=e[14],g=e[15],h=p*g,_=b*f,y=l*g,E=b*u,T=l*f,A=p*u,L=a*g,S=b*o,M=a*f,z=p*o,I=a*u,N=l*o,C=m*x,R=v*c,O=n*x,P=v*s,D=n*c,F=m*s,V=r*x,B=v*i,U=r*c,j=m*i,w=r*s,G=n*i,X=h*s+E*c+T*x-(_*s+y*c+A*x),k=_*i+L*c+z*x-(h*i+S*c+M*x),H=y*i+S*s+I*x-(E*i+L*s+N*x),W=A*i+M*s+N*c-(T*i+z*s+I*c),Y=1/(r*X+n*k+m*H+v*W);return t[0]=Y*X,t[1]=Y*k,t[2]=Y*H,t[3]=Y*W,t[4]=Y*(_*n+y*m+A*v-(h*n+E*m+T*v)),t[5]=Y*(h*r+S*m+M*v-(_*r+L*m+z*v)),t[6]=Y*(E*r+L*n+N*v-(y*r+S*n+I*v)),t[7]=Y*(T*r+z*n+I*m-(A*r+M*n+N*m)),t[8]=Y*(C*u+P*f+D*g-(R*u+O*f+F*g)),t[9]=Y*(R*o+V*f+j*g-(C*o+B*f+U*g)),t[10]=Y*(O*o+B*u+w*g-(P*o+V*u+G*g)),t[11]=Y*(F*o+U*u+G*f-(D*o+j*u+w*f)),t[12]=Y*(O*p+F*b+R*l-(D*b+C*l+P*p)),t[13]=Y*(U*b+C*a+B*p-(V*p+j*b+R*a)),t[14]=Y*(V*l+G*b+P*a-(w*b+O*a+B*l)),t[15]=Y*(w*p+D*a+j*l-(U*l+G*p+F*a)),t}function u(e,t,r){r=r||new Le(16);const i=e[0],a=e[1],o=e[2],n=e[3],s=e[4],d=e[5],l=e[6],u=e[7],m=e[8],c=e[9],p=e[10],f=e[11],v=e[12],x=e[13],b=e[14],g=e[15],h=t[0],_=t[1],y=t[2],E=t[3],T=t[4],A=t[5],L=t[6],S=t[7],M=t[8],z=t[9],I=t[10],N=t[11],C=t[12],R=t[13],O=t[14],P=t[15];return r[0]=i*h+s*_+m*y+v*E,r[1]=a*h+d*_+c*y+x*E,r[2]=o*h+l*_+p*y+b*E,r[3]=n*h+u*_+f*y+g*E,r[4]=i*T+s*A+m*L+v*S,r[5]=a*T+d*A+c*L+x*S,r[6]=o*T+l*A+p*L+b*S,r[7]=n*T+u*A+f*L+g*S,r[8]=i*M+s*z+m*I+v*N,r[9]=a*M+d*z+c*I+x*N,r[10]=o*M+l*z+p*I+b*N,r[11]=n*M+u*z+f*I+g*N,r[12]=i*C+s*R+m*O+v*P,r[13]=a*C+d*R+c*O+x*P,r[14]=o*C+l*R+p*O+b*P,r[15]=n*C+u*R+f*O+g*P,r}function m(e,t,r,i,a){var o=Math.tan;a=a||new Le(16);const n=o(.5*Ee-.5*e),s=1/(r-i);return a[0]=n/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(r+i)*s,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*(r*i*s),a[15]=0,a}function c(e,r,a,o){o=o||new Le(16);const s=Se,d=Me,l=ze;return n(t(e,r,l),l),n(i(a,l,s),s),n(i(l,s,d),d),o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=0,o[4]=d[0],o[5]=d[1],o[6]=d[2],o[7]=0,o[8]=l[0],o[9]=l[1],o[10]=l[2],o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o}function p(e,t){t=t||new Le(16);const r=ye(e),i=_e(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(e,t,r,i){i=i||new Le(16);let a=t[0],o=t[1],d=t[2];const l=Te(a*a+o*o+d*d);a/=l,o/=l,d/=l;const n=a*a,u=o*o,m=d*d,p=ye(r),c=_e(r),s=1-p,f=n+(1-n)*p,v=a*o*s+d*c,b=a*d*s-o*c,g=a*o*s-d*c,h=u+(1-u)*p,_=o*d*s+a*c,E=a*d*s+o*c,T=o*d*s-a*c,A=m+(1-m)*p,L=e[0],S=e[1],M=e[2],I=e[3],N=e[4],C=e[5],R=e[6],O=e[7],P=e[8],D=e[9],F=e[10],V=e[11];return i[0]=f*L+v*N+b*P,i[1]=f*S+v*C+b*D,i[2]=f*M+v*R+b*F,i[3]=f*I+v*O+b*V,i[4]=g*L+h*N+_*P,i[5]=g*S+h*C+_*D,i[6]=g*M+h*R+_*F,i[7]=g*I+h*O+_*V,i[8]=E*L+T*N+A*P,i[9]=E*S+T*C+A*D,i[10]=E*M+T*R+A*F,i[11]=E*I+T*O+A*V,e!==i&&(i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i}function v(t,r,i){i=i||e();const a=r[0],o=r[1],n=r[2],s=a*t[3]+o*t[7]+n*t[11]+t[15];return i[0]=(a*t[0]+o*t[4]+n*t[8]+t[12])/s,i[1]=(a*t[1]+o*t[5]+n*t[9]+t[13])/s,i[2]=(a*t[2]+o*t[6]+n*t[10]+t[14])/s,i}function x(t,r,i){i=i||e();const a=r[0],o=r[1],n=r[2];return i[0]=a*t[0]+o*t[4]+n*t[8],i[1]=a*t[1]+o*t[5]+n*t[9],i[2]=a*t[2]+o*t[6]+n*t[10],i}function b(e,t,r){if(!e)throw new Error("canvas not exist");var i=e.getBoundingClientRect();return{x:(t-i.left)*(e.width/i.width),y:(r-i.top)*(e.height/i.height)}}function g(e,t){var r=Math.floor;t=t||window.devicePixelRatio;var i=e.width,a=e.height,o=r(e.clientWidth*t),n=r(e.clientHeight*t);(i!==o||a!==n)&&(e.width=o,e.height=n,e.style.width=i+"px",e.style.height=a+"px")}function h(e,t){var r="mousewheel";try{document.createEvent("MouseScrollEvents"),r="DOMMouseScroll"}catch(t){}e.addEventListener(r,function(r){if("wheelDelta"in r){var e=r.wheelDelta;window.opera&&10>opera.version()&&(e=-e),r.delta=he(e)/120}else"detail"in r&&(r.wheelDelta=40*-r.detail,r.delta=r.wheelDelta/120);t(r)},!1)}function _(t,i,d,l,u){function m(r){var e=Math.acos,i=b(t,r.clientX,r.clientY),o=2*((A.y>T.y?A.x-i.x:i.x-A.x)/_*Ee),d=(A.y-i.y)/E*Ee,l=M[1],u=e(a(n(M),n([0,l,0]))),m=p(o);u+d<Ee/90&&0<l&&0>d&&(d=Ee/180-u),u-d<Ee/90&&0>l&&0<d&&(d=u-Ee/180);var c=x(p(-Ee/2),[M[0],0,M[2]]),g=f(m,c,-d);S=s(v(g,M))}function c(){M=s(S),t.removeEventListener("mouseup",c,!1),t.removeEventListener("mousemove",m,!1),t.removeEventListener("mouseout",c,!1)}if(!t)throw new Error("canvas not exist");u=u||[0,0,0],i=i||[0,5,5],d=d||1,l=l||50;var g,_=t.clientWidth,E=t.clientHeight,T={x:_/2,y:E/2},A=T,L=1,S=i,M=i;return h(t,function(t){var e=o(M);e<d+1&&0>t.delta||e>l-1&&0<t.delta||(L+=.05*t.delta,S=r(M,L),clearTimeout(g),g=setTimeout(function(){L=1,M=s(S)},20))}),t.addEventListener("mousedown",function(r){A=b(t,r.clientX,r.clientY),t.addEventListener("mousemove",m,!1),t.addEventListener("mouseup",c,!1),t.addEventListener("mouseout",c,!1)},!1),function(){return S}}function y(){return{objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||0>=r.groupCount)&&this.materials.splice(r.index,1);var i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:"",smooth:void 0===r?this.smooth:r.smooth,groupStart:void 0===r?0:r.groupEnd,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){return 0<this.materials.length?this.materials[this.materials.length-1]:void 0},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&1<this.materials.length)for(var r=this.materials.length-1;0<=r;r--)0>=this.materials[r].groupCount&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(0<=r?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(0<=r?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(0<=r?r-1:r+t/2)},addVertex:function(e,t,r){var i=this.vertices,a=this.object.geometry.vertices;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var i=this.normals,a=this.object.geometry.normals;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addColor:function(e,t,r){var i=this.colors,a=this.object.geometry.colors;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,t,r){var i=this.uvs,a=this.object.geometry.uvs;a.push(i[e+0],i[e+1]),a.push(i[t+0],i[t+1]),a.push(i[r+0],i[r+1])},addUVLine:function(e){var t=this.uvs,r=this.object.geometry.uvs;r.push(t[e+0],t[e+1])},addFace:function(e,t,r,i,a,o,n,s,d){var l=this.vertices.length,u=this.parseVertexIndex(e,l),m=this.parseVertexIndex(t,l),c=this.parseVertexIndex(r,l);if(this.addVertex(u,m,c),void 0!==i&&""!==i){var p=this.uvs.length;u=this.parseUVIndex(i,p),m=this.parseUVIndex(a,p),c=this.parseUVIndex(o,p),this.addUV(u,m,c)}if(void 0!==n&&""!==n){var f=this.normals.length;u=this.parseNormalIndex(n,f),m=n===s?u:this.parseNormalIndex(s,f),c=n===d?u:this.parseNormalIndex(d,f),this.addNormal(u,m,c)}0<this.colors.length&&this.addColor(u,m,c)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,r=0,i=e.length;r<i;r++)this.addVertexPoint(this.parseVertexIndex(e[r],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,i=this.uvs.length,a=0,o=e.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(e[a],r));for(var n=0,o=t.length;n<o;n++)this.addUVLine(this.parseUVIndex(t[n],i))}}}function E(e){console.time("OBJLoader");var t=new y;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var r=e.split("\n"),a="",o="",n=0,s=[],d="function"==typeof"".trimLeft,u=0,m=r.length;u<m;u++)if(a=r[u],a=d?a.trimLeft():a.trim(),n=a.length,0!==n&&(o=a.charAt(0),"#"!==o))if("v"===o){var l=a.split(/\s+/);switch(l[0]){case"v":t.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),8===l.length&&t.colors.push(parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6]));break;case"vn":t.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":t.uvs.push(parseFloat(l[1]),parseFloat(l[2]));}}else if("f"===o){for(var c,p=a.substr(1).trim(),f=p.split(/\s+/),v=[],x=0,b=f.length;x<b;x++)if(c=f[x],0<c.length){var g=c.split("/");v.push(g)}for(var h=v[0],x=1,b=v.length-1;x<b;x++){var _=v[x],E=v[x+1];t.addFace(h[0],_[0],E[0],h[1],_[1],E[1],h[2],_[2],E[2])}}else if("l"===o){var A=a.substring(1).trim().split(" "),L=[],S=[];if(-1===a.indexOf("/"))L=A;else for(var M,z=0,I=A.length;z<I;z++)M=A[z].split("/"),""!==M[0]&&L.push(M[0]),""!==M[1]&&S.push(M[1]);t.addLineGeometry(L,S)}else if("p"===o){var p=a.substr(1).trim(),N=p.split(" ");t.addPointGeometry(N)}else if(null!==(s=Ce.exec(a))){var C=(" "+s[0].substr(1).trim()).substr(1);t.startObject(C)}else if(Oe.test(a))t.object.startMaterial(a.substring(7).trim(),t.materialLibraries);else if(Re.test(a))t.materialLibraries.push(a.substring(7).trim());else if("s"===o){if(s=a.split(" "),1<s.length){var R=s[1].trim().toLowerCase();t.object.smooth="0"!==R&&"off"!==R}else t.object.smooth=!0;var O=t.object.currentMaterial();O&&(O.smooth=t.object.smooth)}else{if("\0"===a)continue;throw new Error("THREE.OBJLoader: Unexpected line: \""+a+"\"")}t.finalize();var P=T(t);return t=null,console.timeEnd("OBJLoader"),P}function T(e){var t={children:[],materialLibraries:e.materialLibraries,position:{x:0,y:0,z:0},rotation:{},matrix:{},scale:{x:1,y:1,z:1}};return e.objects.forEach(e=>{var r={};for(var i in e.geometry)e.geometry[i].length&&("vertices"==i&&(r.position={data:new Float32Array(e.geometry[i]),num:3,count:e.geometry[i].length/3}),"normals"==i&&(r.normal={data:new Float32Array(e.geometry[i]),num:3,count:e.geometry[i].length/3}),"uvs"==i&&(r.texcoord={data:new Float32Array(e.geometry[i]),num:2,count:e.geometry[i].length/2}),"colors"==i&&(r.color={data:new Float32Array(e.geometry[i]),num:4,count:e.geometry[i].length/4}));var a={attributes:r,group:[],materials:e.materials,name:e.name,smooth:e.smooth,opacity:1},o=a.attributes.position;e.materials.forEach((e,t)=>{a.group.push({start:e.groupStart||0,end:e.groupEnd||o.data.length/o.num,count:e.groupCount||o.data.length/o.num,index:t})}),t.children.push(a)}),e=null,t}function A(e,t){function r(e){var t={name:e.name};for(var r in e){var i,o=e[r];if(""!==o)switch(r.toLowerCase()){case"ka":t.ambient=o;break;case"kd":t.color=o;break;case"ks":t.specular=o;break;case"ke":t.emissive=o;break;case"map_kd":t.map=a(o,t);break;case"map_ks":t.specularMap=a(o,t);break;case"map_ke":t.emissiveMap=a(o,t);break;case"norm":t.normalMap=a(o,t);break;case"map_bump":case"bump":t.bumpMap=a(o,t);break;case"map_d":t.alphaMap=a(o,t),t.transparent=!0;break;case"ns":t.shininess=parseFloat(o);break;case"d":i=parseFloat(o),t.opacity=i,t.color.push(i),1>i&&(t.transparent=!0);break;case"tr":i=parseFloat(o),t.opacity=1-i,t.color.push(i),0<i&&(t.transparent=!0);break;default:}}return t}function a(e,r){var i,a={scale:{x:1,y:1},offset:{x:0,y:0}},o=e.split(/\s+/);return i=o.indexOf("-bm"),0<=i&&(r.bumpScale=parseFloat(o[i+1]),o.splice(i,2)),i=o.indexOf("-s"),0<=i&&(a.scale={x:parseFloat(o[i+1]),y:parseFloat(o[i+2])},o.splice(i,4)),i=o.indexOf("-o"),0<=i&&(a.offset={x:parseFloat(o[i+1]),y:parseFloat(o[i+2])},o.splice(i,4)),a.src=(t.basePath||"")+o.join("").trim(),a}for(var o,n=e.split("\n"),d={},l=/\s+/,u={},c=0;c<n.length;c++)if(o=n[c],o=o.trim(),0!==o.length&&"#"!==o.charAt(0)){var p=o.indexOf(" "),f=0<=p?o.substring(0,p):o;f=f.toLowerCase();var v=0<=p?o.substring(p+1):"";if(v=v.trim(),"newmtl"===f)d={name:v},u[v]=d;else if("ka"===f||"kd"===f||"ks"===f||"ke"===f){var x=v.split(l,3);d[f]=[parseFloat(x[0]),parseFloat(x[1]),parseFloat(x[2])]}else d[f]=v}for(var s in u)u[s]=r(u[s],t);return u}function L(e,t,r,i){var a=new XMLHttpRequest;a.open("GET",e,!0),a.addEventListener("load",function(e){var r=this.response;200===this.status||0===this.status?(0===this.status&&console.warn("FileLoader: HTTP Status 0 received."),t&&t(r)):i&&i(e)},!1),a.addEventListener("progress",function(e){r&&r(e)},!1),a.addEventListener("error",function(e){i&&i(e)},!1),a.addEventListener("abort",function(e){i&&i(e)},!1),a.send(null)}function S(e){return dt[e].bindPoint}function M(e,t){return function(r){e.uniform1i(t,r)}}function z(e,t){return function(r){e.uniform1iv(t,r)}}function I(e,t){return function(r){e.uniform2iv(t,r)}}function N(e,t){return function(r){e.uniform3iv(t,r)}}function C(e,t){return function(r){e.uniform4iv(t,r)}}function R(e,t,r,i){const a=S(t);return U(e)?function(t){let o,n;B(e,t)?(o=t,n=null):(o=t.texture,n=t.sampler),e.uniform1i(i,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,o),e.bindSampler(r,n)}:function(t){e.uniform1i(i,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,t)}}function O(e,t,r,i,a){const o=S(t),n=new Int32Array(a);for(let o=0;o<a;++o)n[o]=r+o;return U(e)?function(t){e.uniform1iv(i,n),t.forEach(function(t,i){e.activeTexture(e.TEXTURE0+n[i]);let a,s;B(e,t)?(a=t,s=null):(a=t.texture,s=t.sampler),e.bindSampler(r,s),e.bindTexture(o,a)})}:function(t){e.uniform1iv(i,n),t.forEach(function(t,r){e.activeTexture(e.TEXTURE0+n[r]),e.bindTexture(o,t)})}}function P(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4fv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.num||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),r.divisor!==void 0&&e.vertexAttribDivisor(t,r.divisor))}}function D(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4iv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.num||r.size,r.type||e.INT,r.stride||0,r.offset||0),r.divisor!==void 0&&e.vertexAttribDivisor(t,r.divisor))}}function F(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4uiv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.num||r.size,r.type||e.UNSIGNED_INT,r.stride||0,r.offset||0),r.divisor!==void 0&&e.vertexAttribDivisor(t,r.divisor))}}function V(e,t,r){const i=r.size,a=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);const o=r.size||r.num||i,n=r.type||e.FLOAT,s=dt[n],d=s.size*o,l=r.normalize||!1,u=r.offset||0;for(let s=0;s<a;++s)e.enableVertexAttribArray(t+s),e.vertexAttribPointer(t+s,o/a,n,l,d,u+d/a*s),void 0!==r.divisor&&e.vertexAttribDivisor(t+s,r.divisor)}}function B(e,r){return mt||(mt=e.createTexture()),r instanceof mt.constructor}function U(e){return!!e.texStorage2D}function j(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function w(e,t){pt(e,0);const r=e.getExtension(t);if(r){const i={},a=ft.exec(t)[1];for(const t in r){const o=r[t],n="function"==typeof o,s=n?a:"_"+a;let d=t;t.endsWith(s)&&(d=t.substring(0,t.length-s.length)),e[d]===void 0?n?e[d]=function(e){return function(){return e.apply(r,arguments)}}(o):(e[d]=o,i[d]=o):!n&&e[d]!==o&&console.warn(d,e[d],o,t)}i.constructor={name:r.constructor.name},pt(i,0)}return r}function G(e){for(let t=0;t<ct.length;++t)w(e,ct[t])}function X(e,...t){const r=k(t);return H(e,r)}function k(...e){const t=[];let r,i,a;if((e+"").replace(/[^\,\s]+/g,function(e){e&&t.push(e)}),t.forEach(e=>{if(a=document.getElementById(e),!a)throw"unknown script element "+e;0<=a.type.indexOf("vert")?r=a.text:0<=a.type.indexOf("frag")&&(i=a.text)}),!r)throw"VERTEX_SHADER String not exist";if(!i)throw"FRAGMENT_SHADER String not exist";return[r,i]}function H(e,...t){Array.isArray(t[0])&&(t=t[0]);const r=W(e,e.VERTEX_SHADER,t[0]),i=W(e,e.FRAGMENT_SHADER,t[1]);if(!r)throw"VERTEX_SHADER not exist";if(!i)throw"FRAGMENT_SHADER not exist";const a=e.createProgram();if(!a)throw"program not exist";e.attachShader(a,r),e.attachShader(a,i),e.linkProgram(a);const o=e.getProgramParameter(a,e.LINK_STATUS);if(!o){const t=e.getProgramInfoLog(a);throw e.deleteProgram(a),e.deleteShader(i),e.deleteShader(r),"Failed to link program: "+t.toString()}return a}function W(e,t,r){const i=e.createShader(t);if(!i)throw"unable to create shader";e.shaderSource(i,r),e.compileShader(i);const a=e.getShaderParameter(i,e.COMPILE_STATUS);if(!a){const t=e.getShaderInfoLog(i);throw e.deleteShader(i),"Failed to compile shader: "+t.toString()}return i}function Y(e,...t){Array.isArray(t[0])&&(t=t[0]);const r=0<t[0].indexOf("{")?H(e,t):X(e,t),i=J(e,r),a=q(e,r);return{program:r,uniformSetters:i,attribSetters:a}}function q(e,t){const r={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<a;++o){const i=e.getActiveAttrib(t,o);if(j(i))continue;const a=e.getAttribLocation(t,i.name),n=lt[i.type],s=n.setter(e,a,n);s.location=a,r[i.name]=s}return r}function J(e,t){function r(t,r){const a=e.getUniformLocation(t,r.name),o=1<r.size&&"[0]"===r.name.substr(-3),n=r.type,s=dt[n];if(!s)throw"unknown type: 0x"+n.toString(16);let d;if(s.bindPoint){const t=i;i+=r.size,d=o?s.arraySetter(e,n,t,a,r.size):s.setter(e,n,t,a,r.size)}else d=s.arraySetter&&o?s.arraySetter(e,a):s.setter(e,a);return d.location=a,d}let i=0;const a={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<o;++n){const i=e.getActiveUniform(t,n);if(j(i))continue;let o=i.name;"[0]"===o.substr(-3)&&(o=o.substr(0,o.length-3));const s=r(t,i);a[o]=s}return a}function K(e,t){e=e.uniformSetters||e,Object.keys(t).forEach(function(r){const i=e[r];i&&i(t[r])})}function Q(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(Z(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))}function Z(e,t){e=e.attribSetters||e,Object.keys(t).forEach(function(r){const i=e[r];i&&i(t[r])})}function $(e,t){const r={attribs:ee(e,t)};let i=t.indices;return i?(i=ie(i,"indices"),r.indices=te(e,i,e.ELEMENT_ARRAY_BUFFER),r.count=i.length,r.indexType=oe(i)):r.count=le(t),r}function ee(e,t){const r={};return Object.keys(t).forEach(function(i){if(!ne(i)){const a=t[i],o=a.name||a.attribName||ut.attribPrefix(i),n=ie(a,o);r[o]={buffer:te(e,n,void 0,a.drawType),num:a.num||a.size||ae(o),type:oe(n),normalize:de(n),stride:a.stride||0,offset:a.offset||0,divisor:a.divisor,drawType:a.drawType||e.STATIC_DRAW}}}),e.bindBuffer(e.ARRAY_BUFFER,null),r}function te(e,t,r,i){r=r||e.ARRAY_BUFFER;const a=e.createBuffer();return e.bindBuffer(r,a),e.bufferData(r,t,i||e.STATIC_DRAW),a}function re(e,t,r){const i=e.createVertexArray();return e.bindVertexArray(i),t.length||(t=[t]),t.forEach(function(t){Q(e,t,r)}),e.bindVertexArray(null),{count:r.count,indexType:r.indexType,vertexArrayObject:i}}function ie(e,t){if(se(e))return e;if(se(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type;return r||(ne(t)?r=Uint16Array:r=Float32Array),new r(e.data)}function ae(e,t){let r;if(r=vt.test(e)?2:xt.test(e)?4:3,0<t%r)throw"Can not guess num for attribute '"+e+"'. Tried "+r+" but "+t+" values is not evenly divisible by "+r+". You should specify it.";return r}function oe(e){if(e instanceof Int8Array)return Pe;if(e instanceof Uint8Array)return De;if(e instanceof Uint8ClampedArray)return De;if(e instanceof Int16Array)return Fe;if(e instanceof Uint16Array)return Ve;if(e instanceof Int32Array)return Ge;if(e instanceof Uint32Array)return $e;if(e instanceof Float32Array)return Be;throw"unsupported typed array type"}function ne(e){return"indices"===e}function se(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}function de(e){return!!(e instanceof Int8Array)||!!(e instanceof Uint8Array)}function le(e){let t,r;for(r=0;r<bt.length&&(t=bt[r],!(t in e));++r);r===bt.length&&(t=Object.keys(e)[0]);const a=e[t],o=ue(a).length,n=me(a,t);if(0<o%n)throw"numComponents "+n+" not correct for length "+o;return o/n}function ue(e){return e.length?e:e.data}function me(e,t){return e.num||e.size||ae(t,ue(e).length)}function ce(e,t,r,i){const a=e.createTexture();if(!a)throw"Failed to create texture object";const o=t.target||it,n=t.format||ot,s=t.informat||n,d=t.type||De;return e.bindTexture(o,a),r&&i&&e.texImage2D(o,0,s,r,i,0,n,d,null),e.texParameteri(o,e.TEXTURE_MIN_FILTER,t.min||st),e.texParameteri(o,e.TEXTURE_MAG_FILTER,t.mag||st),e.texParameteri(o,e.TEXTURE_WRAP_T,t.wrapT||nt),e.texParameteri(o,e.TEXTURE_WRAP_S,t.wrapS||nt),a}function pe(e,t,r){function a(r,i,a){e.texImage2D(i,0,ot,1,1,0,ot,De,new Uint8Array([0,0,255,255]));const u=new Image;u.onload=function(){!t.flipY||e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.bindTexture(o,l),e.texImage2D(i,0,s,n,d,u),a&&a()},fe(u,r)}const o=t.target||it,n=t.format||ot,s=t.informat||n,d=t.type||De,l=ce(e,t),u=t.src;if("string"==typeof u){if(o!=it)throw"the target must be gl.TEXTURE_2D";a(t.src,o,function(){e.generateMipmap(o),e.bindTexture(o,null),r&&r(l)})}else if(Array.isArray(u)&&6===u.length&&"string"==typeof u[0]){if(o!=at)throw"the target must be gl.TEXTURE_CUBE_MAP";let t=u.length;u.forEach((n,s)=>{a(n,e.TEXTURE_CUBE_MAP_POSITIVE_X+s,function(){t--,0>=t&&(e.generateMipmap(o),e.bindTexture(o,null),r&&r(l))})})}return e.bindTexture(o,null),l}function fe(e,t){const r=location.href.lastIndexOf("/")+1;0>t.search("http")&&(t=location.href.substr(0,r)+t),new URL(t).origin!==window.location.origin&&(e.crossOrigin=""),e.src=t}function ve(){const e=function(e){if(e.lengthComputable){let t=100*(e.loaded/e.total);_t.innerHTML=he(t,2)+"% downloaded"}};return new Promise((t,r)=>{Ne.load("../model/room.mtl",function(i){console.log(i),Ie.load("../model/room.obj",function(e){this.setMaterial(e,i),console.log(e),t([i,e]),_t.style.display="none"},e,r)},null,r)})}function xe(e){let t,r={};for(let i in e)t=e[i],(t.map||t.specularMap||t.bumpMap)&&(r[i]=r[i]||{},t.map&&(r[i].map=pe(ht,t.map)),t.specularMap&&(r[i].specularMap=pe(ht,t.specularMap)),t.bumpMap&&(r[i].bumpMap=pe(ht,t.bumpMap)));return r}async function be(){if(!ht)return;const e=Y(ht,"#define GLSLIFY 1\nattribute vec4 aPosition; \nattribute vec4 aNormal;//\u6CD5\u5411\u91CF\nattribute vec2 aTexcoord;//\u7EB9\u7406\u5750\u6807\nuniform mat4 vpMatrix;//vp\u77E9\u9635\nuniform mat4 modelMatrix;//\u6A21\u578B\u77E9\u9635\nvarying vec3 vNormal;//\u6CD5\u5411\u91CF\nvarying vec3 vPosition;\nvarying vec2 vTexcoord;\n\nvoid main() { \n    vPosition = vec3(modelMatrix * aPosition);\n    vTexcoord = aTexcoord;\n    vNormal = vec3(modelMatrix * aNormal);\n    gl_Position  = vpMatrix * modelMatrix * aPosition;\n}","#extension GL_OES_standard_derivatives : enable\nprecision highp float;\n#define GLSLIFY 1\nuniform vec3 viewPosition;\nuniform vec3 lightPosition;\nuniform vec3 lightColor;\nuniform vec3 ambientColor;\nuniform vec4 color;\nuniform vec3 specularColor;\nuniform float shininess;\nuniform bvec3 useMaps;\nuniform sampler2D diffMap;\nuniform sampler2D specMap;\nuniform sampler2D normMap;\nuniform float bumpScale;\nvarying vec3 vPosition;\nvarying vec2 vTexcoord;\nvarying vec3 vNormal;\nconst float constantAtt = 1.0;\nconst float linearAtt = 0.14;\nconst float quadraticAtt = 0.07;\nconst float gamma = 2.2;\nvec2 dHdxy_fwd_1540259130(sampler2D bumpMap, vec2 texcoord, float bump_scale) {\n    vec2 dSTdx = dFdx(texcoord);\n    vec2 dSTdy = dFdy(texcoord);\n    float Hll = bump_scale * texture2D( bumpMap, texcoord ).x;\n    float dBx = bump_scale * texture2D( bumpMap, texcoord + dSTdx ).x - Hll;\n    float dBy = bump_scale * texture2D( bumpMap, texcoord + dSTdy ).x - Hll;\n    return vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n    vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n    vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n    vec3 vN = surf_norm;\n    vec3 R1 = cross( vSigmaY, vN );\n    vec3 R2 = cross( vN, vSigmaX );\n    float fDet = dot( vSigmaX, R1 );\n    fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n    vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n    return normalize( abs( fDet ) * surf_norm - vGrad );\n}\nvec3 getNormal(sampler2D bumpMap, vec2 texcoord, vec3 surf_pos, vec3 surf_norm, float bump_scale){\n    return perturbNormalArb(-surf_pos, surf_norm, dHdxy_fwd_1540259130(bumpMap, texcoord, bump_scale));\n}\n\nvoid main() {\n    vec3 normal = normalize(vNormal);\n    if(useMaps.z){\n        normal = getNormal(normMap, vTexcoord, vPosition, normal, bumpScale);\n    }\n\n    // \u5149\u7EBF\u65B9\u5411\n    vec3 lightDirection = normalize(lightPosition - vPosition);\n    // \u5149\u7EBF\u65B9\u5411\u548C\u6CD5\u5411\u91CF\u5939\u89D2\n    float nDotL = max(dot(lightDirection, normal), 0.0);\n    // \u5149\u5F3A\u8870\u51CF\n    float att = 0.0;\n    if(nDotL > 0.0){\n        float dis = length(lightPosition - vPosition);\n        att = 1.0/(constantAtt + linearAtt * dis + quadraticAtt * dis * dis);\n    }\n    \n    // \u6F2B\u53CD\u5C04\u5149\u4EAE\u5EA6\n    vec4 diffuseColor = !useMaps.x ? color : texture2D(diffMap, vTexcoord);\n    vec3 diffuse = lightColor * nDotL * diffuseColor.rgb;\n    // \u73AF\u5883\u5149\u4EAE\u5EA6\n    vec3 ambient = ambientColor * diffuseColor.rgb;\n\n    // \u89C2\u5BDF\u65B9\u5411\n    vec3 eyeDirection = normalize(viewPosition - vPosition);\n    // \u955C\u9762\u53CD\u5C04\n    vec3 halfwayDir = normalize(lightDirection + eyeDirection);\n    float specularIntensity = pow(max(dot(normal, halfwayDir), 0.0), shininess);\n    vec3 specular = (!useMaps.y ? specularColor : texture2D(specMap, vTexcoord).rgb ) * specularIntensity;\n    \n    // vec3 mapped = pow(ambient + diffuse + specular, vec3(1.0 / gamma));\n\n    gl_FragColor = vec4(ambient + diffuse + specular, diffuseColor.a);\n}"),[t,r]=await ve();ge();const i=xe(t),a=r.children.map(t=>{const r=$(ht,t.attributes);return t.vao=re(ht,e,r),t});let o=[],n=[];a.forEach(e=>{1>e.opacity?n.push(e):o.push(e)}),n.sort((e,t)=>e.opacity-t.opacity),ht.clearColor(0,0,0,1),ht.enable(ht.DEPTH_TEST),ht.enable(ht.CULL_FACE),g(gt),ht.viewport(0,0,gt.width,gt.height),ht.useProgram(e.program);const s=d(),f=d(),x=m(Ee/6,gt.width/gt.height,1,50),b=_(gt,Lt,2,40),h=d(),y=p(Ee/360);K(e,{lightPosition:yt,lightColor:Et,ambientColor:Tt,bumpScale:.5}),function t(){function r(t){Q(ht,e,t.vao),t.group.forEach(async r=>{const a=t.materials[r.index],o=[!1,!1,!1],n={};a.map&&(o[0]=!0,n.diffMap=i[a.name].map),a.specularMap&&(o[1]=!0,n.specMap=i[a.name].specularMap),a.bumpMap&&(o[2]=!0,n.normMap=i[a.name].bumpMap),1>a.opacity&&!ht.isEnabled(ht.BLEND)?(ht.depthMask(!1),ht.enable(ht.BLEND),ht.blendFunc(ht.SRC_ALPHA,ht.ONE_MINUS_SRC_ALPHA)):1<=a.opacity&&ht.isEnabled(ht.BLEND)&&(ht.depthMask(!0),ht.disable(ht.BLEND)),Object.assign(n,{color:a.color,specularColor:a.specular,shininess:a.shininess,useMaps:o}),K(e,n),ht.drawArrays(ht.TRIANGLES,r.start,r.count)})}At?v(y,Lt,Lt):Lt=b(),c(Lt,[0,0,0],[0,1,0],f),u(x,l(f),s),K(e,{vpMatrix:s,viewPosition:Lt,modelMatrix:h}),ht.clear(ht.COLOR_BUFFER_BIT|ht.DEPTH_BUFFER_BIT),o.forEach(r),n.forEach(r),ht.bindVertexArray(null),requestAnimationFrame(t)}()}function ge(){gt.addEventListener("mousedown",function(){At=!1},!1)}let Ae=Float32Array,Le=Float32Array;const Se=e(),Me=e(),ze=e();var Ie=function(){return{options:{},load:function(e,t,r,i){var a=this;return L(e,function(e){var r=E(e);t.call(a,r)},r,i),a},setMaterial:function(e,t){var r;return e.children.forEach(e=>{e.opacity=1,e.materials.forEach(a=>{if(r=t[a.name],r.map&&r.map.scale&&e.attributes&&e.attributes.texcoord)for(var o=r.map.scale.x,n=r.map.scale.y,s=e.attributes.texcoord.data,d=s.length,l=0;l<d;l+=2)s[l]*=o,s[l+1]*=n;for(var u in r)a[u]=r[u];a.opacity<e.opacity&&(e.opacity=a.opacity)})}),e},set:function(e){return Object.assign(this.options,e),this},parse:E}}(),Ne=function(){return{options:{},load:function(e,t,r,i){var a=this.options;return L(e,function(e){t(A(e,a))},r,i),this},set:function(e){return Object.assign(this.options,e),this},parse:A}}(),Ce=/^[og]\s*(.+)?/,Re=/^mtllib /,Oe=/^usemtl /;const Pe=5120,De=5121,Fe=5122,Ve=5123,Be=5126,Ue=35664,je=35665,we=35666,Ge=5124,Xe=35667,ke=35668,He=35669,We=35670,Ye=35671,qe=35672,Je=35673,Ke=35674,Qe=35675,Ze=35676,$e=5125,et=36294,tt=36295,rt=36296,it=3553,at=34067,ot=6408,nt=10497,st=9729,dt={};dt[Be]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},dt[Ue]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},dt[je]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},dt[we]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},dt[Ge]={Type:Int32Array,size:4,setter:M,arraySetter:z},dt[Xe]={Type:Int32Array,size:8,setter:I},dt[ke]={Type:Int32Array,size:12,setter:N},dt[He]={Type:Int32Array,size:16,setter:C},dt[$e]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},dt[et]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},dt[tt]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},dt[rt]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},dt[We]={Type:Uint32Array,size:4,setter:M,arraySetter:z},dt[Ye]={Type:Uint32Array,size:8,setter:I},dt[qe]={Type:Uint32Array,size:12,setter:N},dt[Je]={Type:Uint32Array,size:16,setter:C},dt[Ke]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},dt[Qe]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},dt[Ze]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},dt[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},dt[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},dt[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},dt[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},dt[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},dt[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},dt[35678]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:it},dt[35680]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:at},dt[35679]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:32879},dt[36289]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:35866};const lt={};lt[Be]={size:4,setter:P},lt[Ue]={size:8,setter:P},lt[je]={size:12,setter:P},lt[we]={size:16,setter:P},lt[Ge]={size:4,setter:D},lt[Xe]={size:8,setter:D},lt[ke]={size:12,setter:D},lt[He]={size:16,setter:D},lt[$e]={size:4,setter:F},lt[et]={size:8,setter:F},lt[tt]={size:12,setter:F},lt[rt]={size:16,setter:F},lt[We]={size:4,setter:D},lt[Ye]={size:8,setter:D},lt[qe]={size:12,setter:D},lt[Je]={size:16,setter:D},lt[Ke]={size:4,setter:V,count:2},lt[Qe]={size:9,setter:V,count:3},lt[Ze]={size:16,setter:V,count:4};const ut={addExtensionsToContext:!0,attribPrefix:e=>"a"+e[0].toUpperCase()+e.substr(1)};let mt;const ct=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"],pt=function(){function e(e){const i=e.constructor.name;if(!t[i]){for(const t in e)if("number"==typeof e[t]){const i=r[e[t]];r[e[t]]=i?`${i} | ${t}`:t}t[i]=!0}}const t={},r={};return function(t,i){return e(t),r[i]||"0x"+i.toString(16)}}(),ft=/^(.*?)_/,vt=/coord|texture/i,xt=/color|colour/i,bt=["position","positions","a_position"];const gt=document.getElementById("canvas"),ht=function(e,t){const r=["webgl","experimental-webgl"];let a=null;for(let o=0,i=r.length;o<i;o++)if(a=e.getContext(r[o],t),a){ut.addExtensionsToContext&&G(a);break}return a}(gt,!0),_t=document.getElementsByTagName("h3")[0],yt=[0,6,-12],Et=[.9,.9,.9],Tt=[.5,.5,.5];let At=!0,Lt=[5,8,-7];be()})();</script></body></html>