(function(){'use strict';var me=Math.sin,pe=Math.cos,ve=Math.PI,Te=Math.sqrt;function e(e,t,i){const r=new he(3);return e&&(r[0]=e),t&&(r[1]=t),i&&(r[2]=i),r}function t(e,t,i){return i=i||new he(3),i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],i}function i(e,t,i){return i=i||new he(3),i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t,i}function r(e,t,i){i=i||new he(3);const r=e[2]*t[0]-e[0]*t[2],n=e[0]*t[1]-e[1]*t[0];return i[0]=e[1]*t[2]-e[2]*t[1],i[1]=r,i[2]=n,i}function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function o(e){return Te(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function a(e,t){t=t||new he(3);const i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Te(i);return 1e-5<r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=0,t[1]=0,t[2]=0),t}function s(e,t){return t=t||new he(3),t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(e){return e=e||new Ee(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,i){if(i=i||new Ee(16),i===e){let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,i}const r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],_=e[9],f=e[10],m=e[11],p=e[12],v=e[13],T=e[14],h=e[15];return i[0]=r,i[1]=s,i[2]=d,i[3]=p,i[4]=n,i[5]=u,i[6]=_,i[7]=v,i[8]=o,i[9]=l,i[10]=f,i[11]=T,i[12]=a,i[13]=c,i[14]=m,i[15]=h,i}function c(e,t){t=t||new Ee(16);const i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],_=e[9],f=e[10],m=e[11],p=e[12],v=e[13],T=e[14],h=e[15],E=f*h,x=T*m,y=u*h,A=T*l,z=u*m,S=f*l,R=n*h,L=T*o,C=n*m,N=f*o,O=n*l,I=u*o,F=c*v,D=p*_,B=a*v,P=p*s,V=a*_,w=c*s,M=i*v,U=p*r,G=i*_,W=c*r,X=i*s,k=a*r,Y=E*s+A*_+z*v-(x*s+y*_+S*v),H=x*r+R*_+N*v-(E*r+L*_+C*v),j=y*r+L*s+O*v-(A*r+R*s+I*v),q=S*r+C*s+I*_-(z*r+N*s+O*_),K=1/(i*Y+a*H+c*j+p*q);return t[0]=K*Y,t[1]=K*H,t[2]=K*j,t[3]=K*q,t[4]=K*(x*a+y*c+S*p-(E*a+A*c+z*p)),t[5]=K*(E*i+L*c+C*p-(x*i+R*c+N*p)),t[6]=K*(A*i+R*a+I*p-(y*i+L*a+O*p)),t[7]=K*(z*i+N*a+O*c-(S*i+C*a+I*c)),t[8]=K*(F*l+P*m+V*h-(D*l+B*m+w*h)),t[9]=K*(D*o+M*m+W*h-(F*o+U*m+G*h)),t[10]=K*(B*o+U*l+X*h-(P*o+M*l+k*h)),t[11]=K*(w*o+G*l+k*m-(V*o+W*l+X*m)),t[12]=K*(B*f+w*T+D*u-(V*T+F*u+P*f)),t[13]=K*(G*T+F*n+U*f-(M*f+W*T+D*n)),t[14]=K*(M*u+k*T+P*n-(X*T+B*n+U*u)),t[15]=K*(X*f+V*n+W*u-(G*u+k*f+w*n)),t}function d(e,t,i){i=i||new Ee(16);const r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],_=e[9],f=e[10],m=e[11],p=e[12],v=e[13],T=e[14],h=e[15],E=t[0],x=t[1],y=t[2],A=t[3],z=t[4],S=t[5],R=t[6],L=t[7],C=t[8],N=t[9],O=t[10],I=t[11],F=t[12],D=t[13],B=t[14],P=t[15];return i[0]=r*E+s*x+d*y+p*A,i[1]=n*E+u*x+_*y+v*A,i[2]=o*E+l*x+f*y+T*A,i[3]=a*E+c*x+m*y+h*A,i[4]=r*z+s*S+d*R+p*L,i[5]=n*z+u*S+_*R+v*L,i[6]=o*z+l*S+f*R+T*L,i[7]=a*z+c*S+m*R+h*L,i[8]=r*C+s*N+d*O+p*I,i[9]=n*C+u*N+_*O+v*I,i[10]=o*C+l*N+f*O+T*I,i[11]=a*C+c*N+m*O+h*I,i[12]=r*F+s*D+d*B+p*P,i[13]=n*F+u*D+_*B+v*P,i[14]=o*F+l*D+f*B+T*P,i[15]=a*F+c*D+m*B+h*P,i}function _(e,i,n,o){o=o||new Ee(16);const s=xe,u=ye,l=ge;return a(t(e,i,l),l),a(r(n,l,s),s),a(r(l,s,u),u),o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=0,o[4]=u[0],o[5]=u[1],o[6]=u[2],o[7]=0,o[8]=l[0],o[9]=l[1],o[10]=l[2],o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o}function f(e,t,i){i=i||new Ee(16);const r=t[0],n=t[1],o=t[2],a=e[0],s=e[1],u=e[2],l=e[3],c=e[4],d=e[5],_=e[6],f=e[7],m=e[8],p=e[9],v=e[10],T=e[11],h=e[12],E=e[13],x=e[14],y=e[15];return e!==i&&(i[0]=a,i[1]=s,i[2]=u,i[3]=l,i[4]=c,i[5]=d,i[6]=_,i[7]=f,i[8]=m,i[9]=p,i[10]=v,i[11]=T),i[12]=a*r+c*n+m*o+h,i[13]=s*r+d*n+p*o+E,i[14]=u*r+_*n+v*o+x,i[15]=l*r+f*n+T*o+y,i}function m(e,t){t=t||new Ee(16);const i=pe(e),r=me(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(e,t){t=t||new Ee(16);const i=pe(e),r=me(e);return t[0]=i,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function v(e,t,i){i=i||new Ee(16);const r=e[0],n=e[1],o=e[2],a=e[3],u=e[8],l=e[9],d=e[10],_=e[11],f=pe(t),c=me(t);return i[0]=f*r-c*u,i[1]=f*n-c*l,i[2]=f*o-c*d,i[3]=f*a-c*_,i[8]=f*u+c*r,i[9]=f*l+c*n,i[10]=f*d+c*o,i[11]=f*_+c*a,e!==i&&(i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i}function T(e,t,i,r){r=r||new Ee(16);let o=t[0],a=t[1],u=t[2];const l=Te(o*o+a*a+u*u);o/=l,a/=l,u/=l;const n=o*o,d=a*a,_=u*u,f=pe(i),c=me(i),s=1-f,m=n+(1-n)*f,p=o*a*s+u*c,v=o*u*s-a*c,T=o*a*s-u*c,h=d+(1-d)*f,E=a*u*s+o*c,A=o*u*s+a*c,S=a*u*s-o*c,R=_+(1-_)*f,L=e[0],C=e[1],N=e[2],O=e[3],I=e[4],F=e[5],D=e[6],B=e[7],P=e[8],V=e[9],w=e[10],M=e[11];return r[0]=m*L+p*I+v*P,r[1]=m*C+p*F+v*V,r[2]=m*N+p*D+v*w,r[3]=m*O+p*B+v*M,r[4]=T*L+h*I+E*P,r[5]=T*C+h*F+E*V,r[6]=T*N+h*D+E*w,r[7]=T*O+h*B+E*M,r[8]=A*L+S*I+R*P,r[9]=A*C+S*F+R*V,r[10]=A*N+S*D+R*w,r[11]=A*O+S*B+R*M,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function h(t,i,r){r=r||e();const n=i[0],o=i[1],a=i[2],s=n*t[3]+o*t[7]+a*t[11]+t[15];return r[0]=(n*t[0]+o*t[4]+a*t[8]+t[12])/s,r[1]=(n*t[1]+o*t[5]+a*t[9]+t[13])/s,r[2]=(n*t[2]+o*t[6]+a*t[10]+t[14])/s,r}function E(t,i,r){r=r||e();const n=i[0],o=i[1],a=i[2];return r[0]=n*t[0]+o*t[4]+a*t[8],r[1]=n*t[1]+o*t[5]+a*t[9],r[2]=n*t[2]+o*t[6]+a*t[10],r}function x(e,t){return Math.random()*(t-e)+e}function y(){var e=Math.floor,t=e(360*Math.random()),i=e(50*Math.random()+50),r=e(20*Math.random()+40);return[t,i,r]}function A(e){var n=Math.ceil,o=parseFloat(e[0]/360,10),a=parseFloat(e[1]/100,10),s=parseFloat(e[2]/100,10);if(0==a){var u=g=b=n(255*s);return[u,g,b]}for(var r,l=.5<=s?s+a-s*a:s*(1+a),c=2*s-l,d=[1/3,0,-1/3],_=0;3>_;_++)r=o+d[_],0>r&&(r+=1),1<r&&(r-=1),r=1>6*r?c+6*(l-c)*r:1>2*r?l:2>3*r?c+6*((l-c)*(2/3-r)):c,d[_]=n(255*r);return d}function z(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]||1]}function S(e,t,i){if(!e)throw new Error("canvas not exist");var r=e.getBoundingClientRect();return{x:(t-r.left)*(e.width/r.width),y:(i-r.top)*(e.height/r.height)}}function R(e,t){var i="mousewheel";try{document.createEvent("MouseScrollEvents"),i="DOMMouseScroll"}catch(t){}e.addEventListener(i,function(i){if("wheelDelta"in i){var e=i.wheelDelta;window.opera&&10>opera.version()&&(e=-e),i.delta=Math.round(e)/120}else"detail"in i&&(i.wheelDelta=40*-i.detail,i.delta=i.wheelDelta/120);t(i)},!1)}function L(t){var i=t[0],r=t[1],n=t[2],e=Te(i*i+r*r+n*n);return e?1==e?t:(e=1/e,t[0]=i*e,t[1]=r*e,t[2]=n*e,t):(t[0]=0,t[1]=0,t[2]=0,t)}function C(e){return He[e].bindPoint}function N(e,t){return function(i){e.uniform1i(t,i)}}function O(e,t){return function(i){e.uniform1iv(t,i)}}function I(e,t){return function(i){e.uniform2iv(t,i)}}function F(e,t){return function(i){e.uniform3iv(t,i)}}function D(e,t){return function(i){e.uniform4iv(t,i)}}function B(e,t,i,r){const n=C(t);return W(e)?function(t){let o,a;G(e,t)?(o=t,a=null):(o=t.texture,a=t.sampler),e.uniform1i(r,i),e.activeTexture(e.TEXTURE0+i),e.bindTexture(n,o),e.bindSampler(i,a)}:function(t){e.uniform1i(r,i),e.activeTexture(e.TEXTURE0+i),e.bindTexture(n,t)}}function P(e,t,r,n,o){const a=C(t),s=new Int32Array(o);for(let a=0;a<o;++a)s[a]=r+a;return W(e)?function(t){e.uniform1iv(n,s),t.forEach(function(t,i){e.activeTexture(e.TEXTURE0+s[i]);let n,o;G(e,t)?(n=t,o=null):(n=t.texture,o=t.sampler),e.bindSampler(r,o),e.bindTexture(a,n)})}:function(t){e.uniform1iv(n,s),t.forEach(function(t,i){e.activeTexture(e.TEXTURE0+s[i]),e.bindTexture(a,t)})}}function V(e,t){return function(i){i.value?(e.disableVertexAttribArray(t),e.vertexAttrib4fv(t,i.value)):(e.bindBuffer(e.ARRAY_BUFFER,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,i.num||i.size,i.type||e.FLOAT,i.normalize||!1,i.stride||0,i.offset||0),i.divisor!==void 0&&e.vertexAttribDivisor(t,i.divisor))}}function w(e,t){return function(i){i.value?(e.disableVertexAttribArray(t),e.vertexAttrib4iv(t,i.value)):(e.bindBuffer(e.ARRAY_BUFFER,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,i.num||i.size,i.type||e.INT,i.stride||0,i.offset||0),i.divisor!==void 0&&e.vertexAttribDivisor(t,i.divisor))}}function M(e,t){return function(i){i.value?(e.disableVertexAttribArray(t),e.vertexAttrib4uiv(t,i.value)):(e.bindBuffer(e.ARRAY_BUFFER,i.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,i.num||i.size,i.type||e.UNSIGNED_INT,i.stride||0,i.offset||0),i.divisor!==void 0&&e.vertexAttribDivisor(t,i.divisor))}}function U(e,t,i){const r=i.size,n=i.count;return function(o){e.bindBuffer(e.ARRAY_BUFFER,o.buffer);const a=o.size||o.num||r,s=o.type||e.FLOAT,u=He[s],l=u.size*a,c=o.normalize||!1,d=o.offset||0;for(let r=0;r<n;++r)e.enableVertexAttribArray(t+r),e.vertexAttribPointer(t+r,a/n,s,c,l,d+l/n*r),void 0!==o.divisor&&e.vertexAttribDivisor(t+r,o.divisor)}}function G(e,i){return Ke||(Ke=e.createTexture()),i instanceof Ke.constructor}function W(e){return!!e.texStorage2D}function X(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function k(e,t){Qe(e,0);const i=e.getExtension(t);if(i){const r={},n=Ze.exec(t)[1];for(const t in i){const o=i[t],a="function"==typeof o,s=a?n:"_"+n;let u=t;t.endsWith(s)&&(u=t.substring(0,t.length-s.length)),e[u]===void 0?a?e[u]=function(e){return function(){return e.apply(i,arguments)}}(o):(e[u]=o,r[u]=o):!a&&e[u]!==o&&console.warn(u,e[u],o,t)}r.constructor={name:i.constructor.name},Qe(r,0)}return i}function Y(e){for(let t=0;t<Je.length;++t)k(e,Je[t])}function H(e,...t){const i=j(t);return q(e,i)}function j(...e){const t=[];let i,r,n;if((e+"").replace(/[^\,\s]+/g,function(e){e&&t.push(e)}),t.forEach(e=>{if(n=document.getElementById(e),!n)throw"unknown script element "+e;0<=n.type.indexOf("vert")?i=n.text:0<=n.type.indexOf("frag")&&(r=n.text)}),!i)throw"VERTEX_SHADER String not exist";if(!r)throw"FRAGMENT_SHADER String not exist";return[i,r]}function q(e,...t){Array.isArray(t[0])&&(t=t[0]);const i=K(e,e.VERTEX_SHADER,t[0]),r=K(e,e.FRAGMENT_SHADER,t[1]);if(!i)throw"VERTEX_SHADER not exist";if(!r)throw"FRAGMENT_SHADER not exist";const n=e.createProgram();if(!n)throw"program not exist";e.attachShader(n,i),e.attachShader(n,r),e.linkProgram(n);const o=e.getProgramParameter(n,e.LINK_STATUS);if(!o){const t=e.getProgramInfoLog(n);throw e.deleteProgram(n),e.deleteShader(r),e.deleteShader(i),"Failed to link program: "+t.toString()}return n}function K(e,t,i){const r=e.createShader(t);if(!r)throw"unable to create shader";e.shaderSource(r,i),e.compileShader(r);const n=e.getShaderParameter(r,e.COMPILE_STATUS);if(!n){const t=e.getShaderInfoLog(r);throw e.deleteShader(r),"Failed to compile shader: "+t.toString()}return r}function J(e,t){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<n;++o){const i=e.getActiveAttrib(t,o);if(X(i))continue;const n=e.getAttribLocation(t,i.name),a=je[i.type],s=a.setter(e,n,a);s.location=n,r[i.name]=s}return r}function Q(e,t){function r(t,i){const r=e.getUniformLocation(t,i.name),o=1<i.size&&"[0]"===i.name.substr(-3),a=i.type,s=He[a];if(!s)throw"unknown type: 0x"+a.toString(16);let u;if(s.bindPoint){const t=n;n+=i.size,u=o?s.arraySetter(e,a,t,r,i.size):s.setter(e,a,t,r,i.size)}else u=s.arraySetter&&o?s.arraySetter(e,r):s.setter(e,r);return u.location=r,u}let n=0;const o={},a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<a;++n){const i=e.getActiveUniform(t,n);if(X(i))continue;let a=i.name;"[0]"===a.substr(-3)&&(a=a.substr(0,a.length-3));const s=r(t,i);o[a]=s}return o}function Z(e,t){e=e.uniformSetters||e,Object.keys(t).forEach(function(i){const r=e[i];r&&r(t[i])})}function $(e,t,i){i.vertexArrayObject?e.bindVertexArray(i.vertexArrayObject):(ee(t.attribSetters||t,i.attribs),i.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.indices))}function ee(e,t){e=e.attribSetters||e,Object.keys(t).forEach(function(i){const r=e[i];r&&r(t[i])})}function te(e,t){const i={attribs:ie(e,t)};let r=t.indices;return r?(r=ne(r,"indices"),i.indices=re(e,r,e.ELEMENT_ARRAY_BUFFER),i.count=r.length,i.indexType=ae(r)):i.count=ce(t),i}function ie(e,t){const i={};return Object.keys(t).forEach(function(r){if(!se(r)){const n=t[r],o=n.name||n.attribName||qe.attribPrefix(r),a=ne(n,o);i[o]={buffer:re(e,a,void 0,n.drawType),num:n.num||n.size||oe(o),type:ae(a),normalize:le(a),stride:n.stride||0,offset:n.offset||0,divisor:n.divisor,drawType:n.drawType||e.STATIC_DRAW}}}),e.bindBuffer(e.ARRAY_BUFFER,null),i}function re(e,t,i,r){i=i||e.ARRAY_BUFFER;const n=e.createBuffer();return e.bindBuffer(i,n),e.bufferData(i,t,r||e.STATIC_DRAW),n}function ne(e,t){if(ue(e))return e;if(ue(e.data))return e.data;Array.isArray(e)&&(e={data:e});let i=e.type;return i||(se(t)?i=Uint16Array:i=Float32Array),new i(e.data)}function oe(e,t){let i;if(i=$e.test(e)?2:et.test(e)?4:3,0<t%i)throw"Can not guess num for attribute '"+e+"'. Tried "+i+" but "+t+" values is not evenly divisible by "+i+". You should specify it.";return i}function ae(e){if(e instanceof Int8Array)return Ae;if(e instanceof Uint8Array)return be;if(e instanceof Uint8ClampedArray)return be;if(e instanceof Int16Array)return ze;if(e instanceof Uint16Array)return Se;if(e instanceof Int32Array)return Oe;if(e instanceof Uint32Array)return We;if(e instanceof Float32Array)return Re;throw"unsupported typed array type"}function se(e){return"indices"===e}function ue(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}function le(e){return!!(e instanceof Int8Array)||!!(e instanceof Uint8Array)}function ce(e){let t,r;for(r=0;r<tt.length&&(t=tt[r],!(t in e));++r);r===tt.length&&(t=Object.keys(e)[0]);const n=e[t],o=de(n).length,a=_e(n,t);if(0<o%a)throw"numComponents "+a+" not correct for length "+o;return o/a}function de(e){return e.length?e:e.data}function _e(e,t){return e.num||e.size||oe(t,de(e).length)}function fe(e,t,i,r,n){i=i||e.TRIANGLES,r=r||t.count,n=n||0;const o=t.indices,a=t.indexType;a||o?e.drawElements(i,r,a||Se,n):e.drawArrays(i,n,r)}let he=Float32Array,Ee=Float32Array;const xe=e(),ye=e(),ge=e(),Ae=5120,be=5121,ze=5122,Se=5123,Re=5126,Le=35664,Ce=35665,Ne=35666,Oe=5124,Ie=35667,Fe=35668,De=35669,Be=35670,Pe=35671,Ve=35672,we=35673,Me=35674,Ue=35675,Ge=35676,We=5125,Xe=36294,ke=36295,Ye=36296,He={};He[Re]={Type:Float32Array,size:4,setter:function(e,t){return function(i){e.uniform1f(t,i)}},arraySetter:function(e,t){return function(i){e.uniform1fv(t,i)}}},He[Le]={Type:Float32Array,size:8,setter:function(e,t){return function(i){e.uniform2fv(t,i)}}},He[Ce]={Type:Float32Array,size:12,setter:function(e,t){return function(i){e.uniform3fv(t,i)}}},He[Ne]={Type:Float32Array,size:16,setter:function(e,t){return function(i){e.uniform4fv(t,i)}}},He[Oe]={Type:Int32Array,size:4,setter:N,arraySetter:O},He[Ie]={Type:Int32Array,size:8,setter:I},He[Fe]={Type:Int32Array,size:12,setter:F},He[De]={Type:Int32Array,size:16,setter:D},He[We]={Type:Uint32Array,size:4,setter:function(e,t){return function(i){e.uniform1ui(t,i)}},arraySetter:function(e,t){return function(i){e.uniform1uiv(t,i)}}},He[Xe]={Type:Uint32Array,size:8,setter:function(e,t){return function(i){e.uniform2uiv(t,i)}}},He[ke]={Type:Uint32Array,size:12,setter:function(e,t){return function(i){e.uniform3uiv(t,i)}}},He[Ye]={Type:Uint32Array,size:16,setter:function(e,t){return function(i){e.uniform4uiv(t,i)}}},He[Be]={Type:Uint32Array,size:4,setter:N,arraySetter:O},He[Pe]={Type:Uint32Array,size:8,setter:I},He[Ve]={Type:Uint32Array,size:12,setter:F},He[we]={Type:Uint32Array,size:16,setter:D},He[Me]={Type:Float32Array,size:16,setter:function(e,t){return function(i){e.uniformMatrix2fv(t,!1,i)}}},He[Ue]={Type:Float32Array,size:36,setter:function(e,t){return function(i){e.uniformMatrix3fv(t,!1,i)}}},He[Ge]={Type:Float32Array,size:64,setter:function(e,t){return function(i){e.uniformMatrix4fv(t,!1,i)}}},He[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(i){e.uniformMatrix2x3fv(t,!1,i)}}},He[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(i){e.uniformMatrix2x4fv(t,!1,i)}}},He[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(i){e.uniformMatrix3x2fv(t,!1,i)}}},He[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(i){e.uniformMatrix3x4fv(t,!1,i)}}},He[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(i){e.uniformMatrix4x2fv(t,!1,i)}}},He[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(i){e.uniformMatrix4x3fv(t,!1,i)}}},He[35678]={Type:null,size:0,setter:B,arraySetter:P,bindPoint:3553},He[35680]={Type:null,size:0,setter:B,arraySetter:P,bindPoint:34067},He[35679]={Type:null,size:0,setter:B,arraySetter:P,bindPoint:32879},He[36289]={Type:null,size:0,setter:B,arraySetter:P,bindPoint:35866};const je={};je[Re]={size:4,setter:V},je[Le]={size:8,setter:V},je[Ce]={size:12,setter:V},je[Ne]={size:16,setter:V},je[Oe]={size:4,setter:w},je[Ie]={size:8,setter:w},je[Fe]={size:12,setter:w},je[De]={size:16,setter:w},je[We]={size:4,setter:M},je[Xe]={size:8,setter:M},je[ke]={size:12,setter:M},je[Ye]={size:16,setter:M},je[Be]={size:4,setter:w},je[Pe]={size:8,setter:w},je[Ve]={size:12,setter:w},je[we]={size:16,setter:w},je[Me]={size:4,setter:U,count:2},je[Ue]={size:9,setter:U,count:3},je[Ge]={size:16,setter:U,count:4};const qe={addExtensionsToContext:!0,attribPrefix:e=>"a"+e[0].toUpperCase()+e.substr(1)};let Ke;const Je=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"],Qe=function(){function e(e){const r=e.constructor.name;if(!t[r]){for(const t in e)if("number"==typeof e[t]){const r=i[e[t]];i[e[t]]=r?`${r} | ${t}`:t}t[r]=!0}}const t={},i={};return function(t,r){return e(t),i[r]||"0x"+r.toString(16)}}(),Ze=/^(.*?)_/,$e=/coord|texture/i,et=/color|colour/i,tt=["position","positions","a_position"],it=document.getElementById("canvas"),rt=function(e,t){const r=["webgl","experimental-webgl"];let n=null;for(let o=0,i=r.length;o<i;o++)if(n=e.getContext(r[o],t),n){qe.addExtensionsToContext&&Y(n);break}return n}(it,!0),nt=[],ot=function(e,...t){Array.isArray(t[0])&&(t=t[0]);const i=0<t[0].indexOf("{")?q(e,t):H(e,t),r=Q(e,i),n=J(e,i);return{program:i,uniformSetters:r,attribSetters:n}}(rt,"attribute vec4 aPosition; attribute vec4 aNormal; uniform mat4 u_modelMatrix; uniform mat4 u_normalMatrix; uniform mat4 u_vpMatrix; varying vec3 v_normal; varying vec3 v_position; void main() { gl_Position = u_vpMatrix * u_modelMatrix * aPosition; v_normal=vec3(u_normalMatrix * aNormal); v_position= vec3(u_modelMatrix * aPosition); }","precision mediump float; uniform vec3 u_lightColor; uniform vec3 u_lightPosition; uniform vec3 u_lightPosition2; uniform vec3 u_ambientColor; uniform vec3 u_viewPosition; uniform vec4 u_color; varying vec3 v_normal; varying vec3 v_position; void main() { vec3 normal = normalize(v_normal); vec3 ambient = u_ambientColor * u_color.rgb; vec3 lightDirection = normalize(u_lightPosition); float cosTheta = max(dot(lightDirection, normal), 0.0); vec3 diffuse = u_lightColor * u_color.rgb * cosTheta; float shininess =100.0; vec3 specularColor =vec3(1.0,1.0,1.0); vec3 viewDirection = normalize(u_viewPosition-v_position); vec3 halfwayDir = normalize(lightDirection + viewDirection); float specularWeighting = pow(max(dot(normal, halfwayDir), 0.0), shininess); vec3 specular = specularColor.rgb * specularWeighting; vec3 lightDirection2 = normalize(u_lightPosition2 - v_position.xyz); float cosTheta2 = max(dot(lightDirection2, normal), 0.0); vec3 diffuse2 = u_lightColor * u_color.rgb * cosTheta2; float shininess2 =30.0; vec3 specularColor2 =vec3(1.0,1.0,1.0); vec3 reflectionDirection = reflect(-lightDirection2, normal); float specularWeighting2 = pow(max(dot(reflectionDirection, viewDirection), 0.0), shininess2); vec3 specular2 = specularColor2.rgb * specularWeighting2; gl_FragColor = vec4(diffuse+diffuse2+ambient+specular+specular2,u_color.a); }"),at=[te(rt,function(e,t){e=e||1,t=t||15;for(var n,o,a,s,u,c,d=[],_=[],f=[],m=0;m<=t;m++){s=m*ve/t,c=e*me(s),o=e*pe(s);for(var p=0;p<=t;p++)u=2*p*ve/t,n=me(u)*c,a=pe(u)*c,d.push(n,o,a)}for(m=0;m<t;m++)for(p=0;p<t;p++){var v=m*(t+1)+p,T=v+t+1;_.push(d[3*v],d[3*v+1],d[3*v+2]),_.push(d[3*T],d[3*T+1],d[3*T+2]),_.push(d[3*(v+1)],d[3*(v+1)+1],d[3*(v+1)+2]),_.push(d[3*(v+1)],d[3*(v+1)+1],d[3*(v+1)+2]),_.push(d[3*T],d[3*T+1],d[3*T+2]),_.push(d[3*(T+1)],d[3*(T+1)+1],d[3*(T+1)+2]),f=f.concat(L([d[3*v],d[3*v+1],d[3*v+2]])),f=f.concat(L([d[3*T],d[3*T+1],d[3*T+2]])),f=f.concat(L([d[3*(v+1)],d[3*(v+1)+1],d[3*(v+1)+2]])),f=f.concat(L([d[3*(v+1)],d[3*(v+1)+1],d[3*(v+1)+2]])),f=f.concat(L([d[3*T],d[3*T+1],d[3*T+2]])),f=f.concat(L([d[3*(T+1)],d[3*(T+1)+1],d[3*(T+1)+2]]))}return d=null,{position:_,normal:f}}(1,50)),te(rt,function(e){e=e||1;var t=[-e,-e,-e,-e,e,-e,e,-e,-e,-e,e,-e,e,e,-e,e,-e,-e,-e,-e,e,e,-e,e,-e,e,e,-e,e,e,e,-e,e,e,e,e,-e,e,-e,-e,e,e,e,e,-e,-e,e,e,e,e,e,e,e,-e,-e,-e,-e,e,-e,-e,-e,-e,e,-e,-e,e,e,-e,-e,e,-e,e,-e,-e,-e,-e,-e,e,-e,e,-e,-e,-e,e,-e,e,e,-e,e,-e,e,-e,-e,e,e,-e,e,-e,e,e,-e,e,e,e,-e,e,e,e];return{position:t,normal:[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0]}}(1)),te(rt,function(e,t,n){e=e||1,t=t||1,n=n||3;for(var o=[],a=[],s=[],u=2*ve/n,c=0,d=0,_=6,f=0;f<n;f++)c=e*pe(u*f),d=e*me(u*f),o.push(c,t/2,d),o.push(c,-t/2,d);for(var f=0,m=o.length;f<m;f+=_){var p=(f+6)%m,v=(f+7)%m,T=(f+8)%m,E=(f+9)%m,y=(f+10)%m,A=(f+11)%m;a.push(0,t/2,0),a.push(o[p],o[v],o[T]),a.push(o[f],o[f+1],o[f+2]),s.push(0,1,0,0,1,0,0,1,0),a.push(o[f],o[f+1],o[f+2]),a.push(o[p],o[v],o[T]),a.push(o[f+3],o[f+4],o[f+5]),s=s.concat(L([o[f],t/2,o[f+2]])),s=s.concat(L([o[p],t/2,o[T]])),s=s.concat(L([o[f+3],-t/2,o[f+5]])),a.push(o[f+3],o[f+4],o[f+5]),a.push(o[p],o[v],o[T]),a.push(o[E],o[y],o[A]),s=s.concat(L([o[f+3],-t/2,o[f+5]])),s=s.concat(L([o[p],t/2,o[T]])),s=s.concat(L([o[E],-t/2,o[A]])),a.push(0,-t/2,0),a.push(o[f+3],o[f+4],o[f+5]),a.push(o[E],o[y],o[A]),s.push(0,-1,0,0,-1,0,0,-1,0)}return o=null,{position:a,normal:s}}(1,2,30)),te(rt,function(e,t,n){e=e||1,t=t||1,n=n||3;for(var o=[],a=[],s=[],u=2*ve/n,c=0,d=e*e/t,_=0,f=3,m=0;m<n;m++)c=e*pe(u*m),_=e*me(u*m),o.push(c,-t/2,_);for(var m=0,p=o.length;m<p;m+=f){var v=(m+3)%p,T=(m+4)%p,E=(m+5)%p;a.push(0,t/2,0),a.push(o[v],o[T],o[E]),a.push(o[m],o[m+1],o[m+2]),s.push(0,1,0),s=s.concat(L([o[v],d,o[E]])),s=s.concat(L([o[m],d,o[m+2]])),a.push(0,-t/2,0),a.push(o[m],o[m+1],o[m+2]),a.push(o[v],o[T],o[E]),s.push(0,-1,0,0,-1,0,0,-1,0)}return o=null,{position:a,normal:s}}(1,3,40))];for(let e=0;e<200;e++)nt.push({xRotation:x(-ve/3,ve/3),yRotation:x(-ve/3,ve/3),xAngle:0,yAngle:0,z:x(3,25),color:z(A(y()))});rt.clearColor(.1,.1,.1,1),rt.enable(rt.DEPTH_TEST),rt.enable(rt.CULL_FACE),rt.viewport(0,0,it.width,it.height),rt.useProgram(ot.program),Z(ot,{u_lightColor:[1,1,1],u_lightPosition:[100,0,-100],u_lightPosition2:[-100,0,100],u_ambientColor:[.4,.4,.4]});const st=function(e,t,i,r,n){var o=Math.tan;n=n||new Ee(16);const a=o(.5*ve-.5*e),s=1/(i-r);return n[0]=a/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(i+r)*s,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*(i*r*s),n[15]=0,n}(ve/4,it.width/it.height,1,150),ut=u(),lt=u(),ct=u(),dt=function(t,r,u,l,c){function d(i){var e=Math.acos,r=S(t,i.clientX,i.clientY),o=2*((A.y>x.y?A.x-r.x:r.x-A.x)/m*ve),u=(A.y-r.y)/v*ve,l=C[1],c=e(n(a(C),a([0,l,0]))),d=p(o);c+u<ve/90&&0<l&&0>u&&(u=ve/180-c),c-u<ve/90&&0>l&&0<u&&(u=c-ve/180);var _=E(p(-ve/2),[C[0],0,C[2]]),f=T(d,_,-u);L=s(h(f,C))}function _(){C=s(L),t.removeEventListener("mouseup",_,!1),t.removeEventListener("mousemove",d,!1),t.removeEventListener("mouseout",_,!1)}if(!t)throw new Error("canvas not exist");c=c||[0,0,0],r=r||[0,5,5],u=u||1,l=l||50;var f,m=t.clientWidth,v=t.clientHeight,x={x:m/2,y:v/2},A=x,z=1,L=r,C=r;return R(t,function(t){var e=o(C);e<u+1&&0>t.delta||e>l-1&&0<t.delta||(z+=.05*t.delta,L=i(C,z),clearTimeout(f),f=setTimeout(function(){z=1,C=s(L)},20))}),t.addEventListener("mousedown",function(i){A=S(t,i.clientX,i.clientY),t.addEventListener("mousemove",d,!1),t.addEventListener("mouseup",_,!1),t.addEventListener("mouseout",_,!1)},!1),function(){return L}}(it,[0,9,50],3,80);let _t,ft=Date.now();(function e(){let t=new Date,r=t-ft;ft=t;const n=dt();rt.clear(rt.COLOR_BUFFER_BIT|rt.DEPTH_BUFFER_BIT),nt.forEach((e,t)=>{e.xAngle+=e.xRotation*r/1e3,e.yAngle+=e.yRotation*r/1e3,e.xAngle%=2*ve,e.yAngle%=2*ve,m(e.xAngle,ut),v(ut,e.yAngle,ut),f(ut,[0,0,e.z],ut),d(st,c(_(n,[0,0,0],[0,1,0])),ct),l(c(ut),lt),_t=at[t%at.length],$(rt,ot,_t),Z(ot,{u_viewPosition:n,u_color:e.color,u_modelMatrix:ut,u_normalMatrix:lt,u_vpMatrix:ct}),fe(rt,_t)}),requestAnimationFrame(e)})()})();