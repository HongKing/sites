(function(){'use strict';var xe=Math.round,be=Math.sin,ge=Math.cos,he=Math.PI,ye=Math.sqrt;function e(e,t,r){const i=new Ee(3);return e&&(i[0]=e),t&&(i[1]=t),r&&(i[2]=r),i}function t(e,t,r){return r=r||new Ee(3),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function r(e,t,r){return r=r||new Ee(3),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function i(e,t,r){r=r||new Ee(3);const i=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=i,r[2]=a,r}function a(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function o(e){return ye(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function n(e,t){t=t||new Ee(3);const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=ye(r);return 1e-5<i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=0,t[1]=0,t[2]=0),t}function s(e,t){return t=t||new Ee(3),t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(e){return e=e||new Te(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function d(e,t){t=t||new Te(16);const r=e[0],i=e[1],a=e[2],o=e[3],n=e[4],s=e[5],u=e[6],l=e[7],m=e[8],p=e[9],c=e[10],f=e[11],_=e[12],v=e[13],x=e[14],b=e[15],g=c*b,h=x*f,y=u*b,E=x*l,T=u*f,A=c*l,L=a*b,S=x*o,M=a*f,z=c*o,I=a*l,C=u*o,N=m*v,R=_*p,O=n*v,D=_*s,F=n*p,V=m*s,P=r*v,B=_*i,U=r*p,j=m*i,w=r*s,G=n*i,X=g*s+E*p+T*v-(h*s+y*p+A*v),k=h*i+L*p+z*v-(g*i+S*p+M*v),H=y*i+S*s+I*v-(E*i+L*s+C*v),W=A*i+M*s+C*p-(T*i+z*s+I*p),Y=1/(r*X+n*k+m*H+_*W);return t[0]=Y*X,t[1]=Y*k,t[2]=Y*H,t[3]=Y*W,t[4]=Y*(h*n+y*m+A*_-(g*n+E*m+T*_)),t[5]=Y*(g*r+S*m+M*_-(h*r+L*m+z*_)),t[6]=Y*(E*r+L*n+C*_-(y*r+S*n+I*_)),t[7]=Y*(T*r+z*n+I*m-(A*r+M*n+C*m)),t[8]=Y*(N*l+D*f+F*b-(R*l+O*f+V*b)),t[9]=Y*(R*o+P*f+j*b-(N*o+B*f+U*b)),t[10]=Y*(O*o+B*l+w*b-(D*o+P*l+G*b)),t[11]=Y*(V*o+U*l+G*f-(F*o+j*l+w*f)),t[12]=Y*(O*c+V*x+R*u-(F*x+N*u+D*c)),t[13]=Y*(U*x+N*a+B*c-(P*c+j*x+R*a)),t[14]=Y*(P*u+G*x+D*a-(w*x+O*a+B*u)),t[15]=Y*(w*c+F*a+j*u-(U*u+G*c+V*a)),t}function l(e,t,r){r=r||new Te(16);const i=e[0],a=e[1],o=e[2],n=e[3],s=e[4],u=e[5],d=e[6],l=e[7],m=e[8],p=e[9],c=e[10],f=e[11],_=e[12],v=e[13],x=e[14],b=e[15],g=t[0],h=t[1],y=t[2],E=t[3],T=t[4],A=t[5],L=t[6],S=t[7],M=t[8],z=t[9],I=t[10],C=t[11],N=t[12],R=t[13],O=t[14],D=t[15];return r[0]=i*g+s*h+m*y+_*E,r[1]=a*g+u*h+p*y+v*E,r[2]=o*g+d*h+c*y+x*E,r[3]=n*g+l*h+f*y+b*E,r[4]=i*T+s*A+m*L+_*S,r[5]=a*T+u*A+p*L+v*S,r[6]=o*T+d*A+c*L+x*S,r[7]=n*T+l*A+f*L+b*S,r[8]=i*M+s*z+m*I+_*C,r[9]=a*M+u*z+p*I+v*C,r[10]=o*M+d*z+c*I+x*C,r[11]=n*M+l*z+f*I+b*C,r[12]=i*N+s*R+m*O+_*D,r[13]=a*N+u*R+p*O+v*D,r[14]=o*N+d*R+c*O+x*D,r[15]=n*N+l*R+f*O+b*D,r}function m(e,t,r,i,a){var o=Math.tan;a=a||new Te(16);const n=o(.5*he-.5*e),s=1/(r-i);return a[0]=n/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(r+i)*s,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*(r*i*s),a[15]=0,a}function p(e,r,a,o){o=o||new Te(16);const s=Ae,u=Le,d=Se;return n(t(e,r,d),d),n(i(a,d,s),s),n(i(d,s,u),u),o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=0,o[4]=u[0],o[5]=u[1],o[6]=u[2],o[7]=0,o[8]=d[0],o[9]=d[1],o[10]=d[2],o[11]=0,o[12]=e[0],o[13]=e[1],o[14]=e[2],o[15]=1,o}function c(e,t){t=t||new Te(16);const r=ge(e),i=be(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(e,t,r,i){i=i||new Te(16);let a=t[0],o=t[1],u=t[2];const d=ye(a*a+o*o+u*u);a/=d,o/=d,u/=d;const n=a*a,l=o*o,m=u*u,p=ge(r),c=be(r),s=1-p,f=n+(1-n)*p,_=a*o*s+u*c,v=a*u*s-o*c,b=a*o*s-u*c,g=l+(1-l)*p,h=o*u*s+a*c,E=a*u*s+o*c,T=o*u*s-a*c,A=m+(1-m)*p,L=e[0],S=e[1],M=e[2],I=e[3],C=e[4],N=e[5],R=e[6],O=e[7],D=e[8],F=e[9],V=e[10],P=e[11];return i[0]=f*L+_*C+v*D,i[1]=f*S+_*N+v*F,i[2]=f*M+_*R+v*V,i[3]=f*I+_*O+v*P,i[4]=b*L+g*C+h*D,i[5]=b*S+g*N+h*F,i[6]=b*M+g*R+h*V,i[7]=b*I+g*O+h*P,i[8]=E*L+T*C+A*D,i[9]=E*S+T*N+A*F,i[10]=E*M+T*R+A*V,i[11]=E*I+T*O+A*P,e!==i&&(i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i}function _(t,r,i){i=i||e();const a=r[0],o=r[1],n=r[2],s=a*t[3]+o*t[7]+n*t[11]+t[15];return i[0]=(a*t[0]+o*t[4]+n*t[8]+t[12])/s,i[1]=(a*t[1]+o*t[5]+n*t[9]+t[13])/s,i[2]=(a*t[2]+o*t[6]+n*t[10]+t[14])/s,i}function v(t,r,i){i=i||e();const a=r[0],o=r[1],n=r[2];return i[0]=a*t[0]+o*t[4]+n*t[8],i[1]=a*t[1]+o*t[5]+n*t[9],i[2]=a*t[2]+o*t[6]+n*t[10],i}function x(e,t,r){if(!e)throw new Error("canvas not exist");var i=e.getBoundingClientRect();return{x:(t-i.left)*(e.width/i.width),y:(r-i.top)*(e.height/i.height)}}function b(e,t){var r=Math.floor;t=t||window.devicePixelRatio;var i=e.width,a=e.height,o=r(e.clientWidth*t),n=r(e.clientHeight*t);(i!==o||a!==n)&&(e.width=o,e.height=n,e.style.width=i+"px",e.style.height=a+"px")}function g(e,t){var r="mousewheel";try{document.createEvent("MouseScrollEvents"),r="DOMMouseScroll"}catch(t){}e.addEventListener(r,function(r){if("wheelDelta"in r){var e=r.wheelDelta;window.opera&&10>opera.version()&&(e=-e),r.delta=xe(e)/120}else"detail"in r&&(r.wheelDelta=40*-r.detail,r.delta=r.wheelDelta/120);t(r)},!1)}function h(t,i,u,d,l){function m(r){var e=Math.acos,i=x(t,r.clientX,r.clientY),o=2*((A.y>T.y?A.x-i.x:i.x-A.x)/h*he),u=(A.y-i.y)/E*he,d=M[1],l=e(a(n(M),n([0,d,0]))),m=c(o);l+u<he/90&&0<d&&0>u&&(u=he/180-l),l-u<he/90&&0>d&&0<u&&(u=l-he/180);var p=v(c(-he/2),[M[0],0,M[2]]),b=f(m,p,-u);S=s(_(b,M))}function p(){M=s(S),t.removeEventListener("mouseup",p,!1),t.removeEventListener("mousemove",m,!1),t.removeEventListener("mouseout",p,!1)}if(!t)throw new Error("canvas not exist");l=l||[0,0,0],i=i||[0,5,5],u=u||1,d=d||50;var b,h=t.clientWidth,E=t.clientHeight,T={x:h/2,y:E/2},A=T,L=1,S=i,M=i;return g(t,function(t){var e=o(M);e<u+1&&0>t.delta||e>d-1&&0<t.delta||(L+=.05*t.delta,S=r(M,L),clearTimeout(b),b=setTimeout(function(){L=1,M=s(S)},20))}),t.addEventListener("mousedown",function(r){A=x(t,r.clientX,r.clientY),t.addEventListener("mousemove",m,!1),t.addEventListener("mouseup",p,!1),t.addEventListener("mouseout",p,!1)},!1),function(){return S}}function y(){return{objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||0>=r.groupCount)&&this.materials.splice(r.index,1);var i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:"",smooth:void 0===r?this.smooth:r.smooth,groupStart:void 0===r?0:r.groupEnd,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){return 0<this.materials.length?this.materials[this.materials.length-1]:void 0},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&1<this.materials.length)for(var r=this.materials.length-1;0<=r;r--)0>=this.materials[r].groupCount&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(0<=r?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(0<=r?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(0<=r?r-1:r+t/2)},addVertex:function(e,t,r){var i=this.vertices,a=this.object.geometry.vertices;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var i=this.normals,a=this.object.geometry.normals;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addColor:function(e,t,r){var i=this.colors,a=this.object.geometry.colors;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,t,r){var i=this.uvs,a=this.object.geometry.uvs;a.push(i[e+0],i[e+1]),a.push(i[t+0],i[t+1]),a.push(i[r+0],i[r+1])},addUVLine:function(e){var t=this.uvs,r=this.object.geometry.uvs;r.push(t[e+0],t[e+1])},addFace:function(e,t,r,i,a,o,n,s,u){var d=this.vertices.length,l=this.parseVertexIndex(e,d),m=this.parseVertexIndex(t,d),p=this.parseVertexIndex(r,d);if(this.addVertex(l,m,p),void 0!==i&&""!==i){var c=this.uvs.length;l=this.parseUVIndex(i,c),m=this.parseUVIndex(a,c),p=this.parseUVIndex(o,c),this.addUV(l,m,p)}if(void 0!==n&&""!==n){var f=this.normals.length;l=this.parseNormalIndex(n,f),m=n===s?l:this.parseNormalIndex(s,f),p=n===u?l:this.parseNormalIndex(u,f),this.addNormal(l,m,p)}0<this.colors.length&&this.addColor(l,m,p)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,r=0,i=e.length;r<i;r++)this.addVertexPoint(this.parseVertexIndex(e[r],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,i=this.uvs.length,a=0,o=e.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(e[a],r));for(var n=0,o=t.length;n<o;n++)this.addUVLine(this.parseUVIndex(t[n],i))}}}function E(e){console.time("OBJLoader");var t=new y;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var r=e.split("\n"),a="",o="",n=0,s=[],u="function"==typeof"".trimLeft,d=0,m=r.length;d<m;d++)if(a=r[d],a=u?a.trimLeft():a.trim(),n=a.length,0!==n&&(o=a.charAt(0),"#"!==o))if("v"===o){var l=a.split(/\s+/);switch(l[0]){case"v":t.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),8===l.length&&t.colors.push(parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6]));break;case"vn":t.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":t.uvs.push(parseFloat(l[1]),parseFloat(l[2]));}}else if("f"===o){for(var p,c=a.substr(1).trim(),f=c.split(/\s+/),_=[],v=0,x=f.length;v<x;v++)if(p=f[v],0<p.length){var b=p.split("/");_.push(b)}for(var g=_[0],v=1,x=_.length-1;v<x;v++){var h=_[v],E=_[v+1];t.addFace(g[0],h[0],E[0],g[1],h[1],E[1],g[2],h[2],E[2])}}else if("l"===o){var A=a.substring(1).trim().split(" "),L=[],S=[];if(-1===a.indexOf("/"))L=A;else for(var M,z=0,I=A.length;z<I;z++)M=A[z].split("/"),""!==M[0]&&L.push(M[0]),""!==M[1]&&S.push(M[1]);t.addLineGeometry(L,S)}else if("p"===o){var c=a.substr(1).trim(),C=c.split(" ");t.addPointGeometry(C)}else if(null!==(s=Ie.exec(a))){var N=(" "+s[0].substr(1).trim()).substr(1);t.startObject(N)}else if(Ne.test(a))t.object.startMaterial(a.substring(7).trim(),t.materialLibraries);else if(Ce.test(a))t.materialLibraries.push(a.substring(7).trim());else if("s"===o){if(s=a.split(" "),1<s.length){var R=s[1].trim().toLowerCase();t.object.smooth="0"!==R&&"off"!==R}else t.object.smooth=!0;var O=t.object.currentMaterial();O&&(O.smooth=t.object.smooth)}else{if("\0"===a)continue;throw new Error("THREE.OBJLoader: Unexpected line: \""+a+"\"")}t.finalize();var D=T(t);return t=null,console.timeEnd("OBJLoader"),D}function T(e){var t={children:[],materialLibraries:e.materialLibraries,position:{x:0,y:0,z:0},rotation:{},matrix:{},scale:{x:1,y:1,z:1}};return e.objects.forEach(e=>{var r={};for(var i in e.geometry)e.geometry[i].length&&("vertices"==i&&(r.position={data:new Float32Array(e.geometry[i]),num:3,count:e.geometry[i].length/3}),"normals"==i&&(r.normal={data:new Float32Array(e.geometry[i]),num:3,count:e.geometry[i].length/3}),"uvs"==i&&(r.texcoord={data:new Float32Array(e.geometry[i]),num:2,count:e.geometry[i].length/2}),"colors"==i&&(r.color={data:new Float32Array(e.geometry[i]),num:4,count:e.geometry[i].length/4}));var a={attributes:r,group:[],materials:e.materials,name:e.name,smooth:e.smooth,opacity:1},o=a.attributes.position;e.materials.forEach((e,t)=>{a.group.push({start:e.groupStart||0,end:e.groupEnd||o.data.length/o.num,count:e.groupCount||o.data.length/o.num,index:t})}),t.children.push(a)}),e=null,t}function A(e,t){function r(e){var t={name:e.name};for(var r in e){var i,o=e[r];if(""!==o)switch(r.toLowerCase()){case"ka":t.ambient=o;break;case"kd":t.color=o;break;case"ks":t.specular=o;break;case"ke":t.emissive=o;break;case"map_kd":t.map=a(o,t);break;case"map_ks":t.specularMap=a(o,t);break;case"map_ke":t.emissiveMap=a(o,t);break;case"norm":t.normalMap=a(o,t);break;case"map_bump":case"bump":t.bumpMap=a(o,t);break;case"map_d":t.alphaMap=a(o,t),t.transparent=!0;break;case"ns":t.shininess=parseFloat(o);break;case"d":i=parseFloat(o),t.opacity=i,t.color.push(i),1>i&&(t.transparent=!0);break;case"tr":i=parseFloat(o),t.opacity=1-i,t.color.push(i),0<i&&(t.transparent=!0);break;default:}}return t}function a(e,r){var i,a={scale:{x:1,y:1},offset:{x:0,y:0}},o=e.split(/\s+/);return i=o.indexOf("-bm"),0<=i&&(r.bumpScale=parseFloat(o[i+1]),o.splice(i,2)),i=o.indexOf("-s"),0<=i&&(a.scale={x:parseFloat(o[i+1]),y:parseFloat(o[i+2])},o.splice(i,4)),i=o.indexOf("-o"),0<=i&&(a.offset={x:parseFloat(o[i+1]),y:parseFloat(o[i+2])},o.splice(i,4)),a.src=location.origin+(t.basePath||"")+o.join("").trim(),a}for(var o,n=e.split("\n"),u={},d=/\s+/,l={},p=0;p<n.length;p++)if(o=n[p],o=o.trim(),0!==o.length&&"#"!==o.charAt(0)){var c=o.indexOf(" "),f=0<=c?o.substring(0,c):o;f=f.toLowerCase();var _=0<=c?o.substring(c+1):"";if(_=_.trim(),"newmtl"===f)u={name:_},l[_]=u;else if("ka"===f||"kd"===f||"ks"===f||"ke"===f){var v=_.split(d,3);u[f]=[parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])]}else u[f]=_}for(var s in l)l[s]=r(l[s],t);return l}function L(e,t,r,i){var a=new XMLHttpRequest;a.open("GET",e,!0),a.addEventListener("load",function(e){var r=this.response;200===this.status||0===this.status?(0===this.status&&console.warn("FileLoader: HTTP Status 0 received."),t&&t(r)):i&&i(e)},!1),a.addEventListener("progress",function(e){r&&r(e)},!1),a.addEventListener("error",function(e){i&&i(e)},!1),a.addEventListener("abort",function(e){i&&i(e)},!1),a.send(null)}function S(e){return nt[e].bindPoint}function M(e,t){return function(r){e.uniform1i(t,r)}}function z(e,t){return function(r){e.uniform1iv(t,r)}}function I(e,t){return function(r){e.uniform2iv(t,r)}}function C(e,t){return function(r){e.uniform3iv(t,r)}}function N(e,t){return function(r){e.uniform4iv(t,r)}}function R(e,t,r,i){const a=S(t);return U(e)?function(t){let o,n;B(e,t)?(o=t,n=null):(o=t.texture,n=t.sampler),e.uniform1i(i,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,o),e.bindSampler(r,n)}:function(t){e.uniform1i(i,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,t)}}function O(e,t,r,i,a){const o=S(t),n=new Int32Array(a);for(let o=0;o<a;++o)n[o]=r+o;return U(e)?function(t){e.uniform1iv(i,n),t.forEach(function(t,i){e.activeTexture(e.TEXTURE0+n[i]);let a,s;B(e,t)?(a=t,s=null):(a=t.texture,s=t.sampler),e.bindSampler(r,s),e.bindTexture(o,a)})}:function(t){e.uniform1iv(i,n),t.forEach(function(t,r){e.activeTexture(e.TEXTURE0+n[r]),e.bindTexture(o,t)})}}function D(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4fv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.num||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),r.divisor!==void 0&&e.vertexAttribDivisor(t,r.divisor))}}function F(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4iv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.num||r.size,r.type||e.INT,r.stride||0,r.offset||0),r.divisor!==void 0&&e.vertexAttribDivisor(t,r.divisor))}}function V(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4uiv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.num||r.size,r.type||e.UNSIGNED_INT,r.stride||0,r.offset||0),r.divisor!==void 0&&e.vertexAttribDivisor(t,r.divisor))}}function P(e,t,r){const i=r.size,a=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);const o=r.size||r.num||i,n=r.type||e.FLOAT,s=nt[n],u=s.size*o,d=r.normalize||!1,l=r.offset||0;for(let s=0;s<a;++s)e.enableVertexAttribArray(t+s),e.vertexAttribPointer(t+s,o/a,n,d,u,l+u/a*s),void 0!==r.divisor&&e.vertexAttribDivisor(t+s,r.divisor)}}function B(e,r){return dt||(dt=e.createTexture()),r instanceof dt.constructor}function U(e){return!!e.texStorage2D}function j(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function w(e,t){mt(e,0);const r=e.getExtension(t);if(r){const i={},a=pt.exec(t)[1];for(const t in r){const o=r[t],n="function"==typeof o,s=n?a:"_"+a;let u=t;t.endsWith(s)&&(u=t.substring(0,t.length-s.length)),e[u]===void 0?n?e[u]=function(e){return function(){return e.apply(r,arguments)}}(o):(e[u]=o,i[u]=o):!n&&e[u]!==o&&console.warn(u,e[u],o,t)}i.constructor={name:r.constructor.name},mt(i,0)}return r}function G(e){for(let t=0;t<lt.length;++t)w(e,lt[t])}function X(e,...t){const r=k(t);return H(e,r)}function k(...e){const t=[];let r,i,a;if((e+"").replace(/[^\,\s]+/g,function(e){e&&t.push(e)}),t.forEach(e=>{if(a=document.getElementById(e),!a)throw"unknown script element "+e;0<=a.type.indexOf("vert")?r=a.text:0<=a.type.indexOf("frag")&&(i=a.text)}),!r)throw"VERTEX_SHADER String not exist";if(!i)throw"FRAGMENT_SHADER String not exist";return[r,i]}function H(e,...t){Array.isArray(t[0])&&(t=t[0]);const r=W(e,e.VERTEX_SHADER,t[0]),i=W(e,e.FRAGMENT_SHADER,t[1]);if(!r)throw"VERTEX_SHADER not exist";if(!i)throw"FRAGMENT_SHADER not exist";const a=e.createProgram();if(!a)throw"program not exist";e.attachShader(a,r),e.attachShader(a,i),e.linkProgram(a);const o=e.getProgramParameter(a,e.LINK_STATUS);if(!o){const t=e.getProgramInfoLog(a);throw e.deleteProgram(a),e.deleteShader(i),e.deleteShader(r),"Failed to link program: "+t.toString()}return a}function W(e,t,r){const i=e.createShader(t);if(!i)throw"unable to create shader";e.shaderSource(i,r),e.compileShader(i);const a=e.getShaderParameter(i,e.COMPILE_STATUS);if(!a){const t=e.getShaderInfoLog(i);throw e.deleteShader(i),"Failed to compile shader: "+t.toString()}return i}function Y(e,...t){Array.isArray(t[0])&&(t=t[0]);const r=0<t[0].indexOf("{")?H(e,t):X(e,t),i=J(e,r),a=q(e,r);return{program:r,uniformSetters:i,attribSetters:a}}function q(e,t){const r={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<a;++o){const i=e.getActiveAttrib(t,o);if(j(i))continue;const a=e.getAttribLocation(t,i.name),n=st[i.type],s=n.setter(e,a,n);s.location=a,r[i.name]=s}return r}function J(e,t){function r(t,r){const a=e.getUniformLocation(t,r.name),o=1<r.size&&"[0]"===r.name.substr(-3),n=r.type,s=nt[n];if(!s)throw"unknown type: 0x"+n.toString(16);let u;if(s.bindPoint){const t=i;i+=r.size,u=o?s.arraySetter(e,n,t,a,r.size):s.setter(e,n,t,a,r.size)}else u=s.arraySetter&&o?s.arraySetter(e,a):s.setter(e,a);return u.location=a,u}let i=0;const a={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<o;++n){const i=e.getActiveUniform(t,n);if(j(i))continue;let o=i.name;"[0]"===o.substr(-3)&&(o=o.substr(0,o.length-3));const s=r(t,i);a[o]=s}return a}function K(e,t){e=e.uniformSetters||e,Object.keys(t).forEach(function(r){const i=e[r];i&&i(t[r])})}function Q(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(Z(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))}function Z(e,t){e=e.attribSetters||e,Object.keys(t).forEach(function(r){const i=e[r];i&&i(t[r])})}function $(e,t){const r={attribs:ee(e,t)};let i=t.indices;return i?(i=ie(i,"indices"),r.indices=te(e,i,e.ELEMENT_ARRAY_BUFFER),r.count=i.length,r.indexType=oe(i)):r.count=de(t),r}function ee(e,t){const r={};return Object.keys(t).forEach(function(i){if(!ne(i)){const a=t[i],o=a.name||a.attribName||ut.attribPrefix(i),n=ie(a,o);r[o]={buffer:te(e,n,void 0,a.drawType),num:a.num||a.size||ae(o),type:oe(n),normalize:ue(n),stride:a.stride||0,offset:a.offset||0,divisor:a.divisor,drawType:a.drawType||e.STATIC_DRAW}}}),e.bindBuffer(e.ARRAY_BUFFER,null),r}function te(e,t,r,i){r=r||e.ARRAY_BUFFER;const a=e.createBuffer();return e.bindBuffer(r,a),e.bufferData(r,t,i||e.STATIC_DRAW),a}function re(e,t,r){const i=e.createVertexArray();return e.bindVertexArray(i),t.length||(t=[t]),t.forEach(function(t){Q(e,t,r)}),e.bindVertexArray(null),{count:r.count,indexType:r.indexType,vertexArrayObject:i}}function ie(e,t){if(se(e))return e;if(se(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type;return r||(ne(t)?r=Uint16Array:r=Float32Array),new r(e.data)}function ae(e,t){let r;if(r=ct.test(e)?2:ft.test(e)?4:3,0<t%r)throw"Can not guess num for attribute '"+e+"'. Tried "+r+" but "+t+" values is not evenly divisible by "+r+". You should specify it.";return r}function oe(e){if(e instanceof Int8Array)return Re;if(e instanceof Uint8Array)return Oe;if(e instanceof Uint8ClampedArray)return Oe;if(e instanceof Int16Array)return De;if(e instanceof Uint16Array)return Fe;if(e instanceof Int32Array)return je;if(e instanceof Uint32Array)return Qe;if(e instanceof Float32Array)return Ve;throw"unsupported typed array type"}function ne(e){return"indices"===e}function se(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}function ue(e){return!!(e instanceof Int8Array)||!!(e instanceof Uint8Array)}function de(e){let t,r;for(r=0;r<_t.length&&(t=_t[r],!(t in e));++r);r===_t.length&&(t=Object.keys(e)[0]);const a=e[t],o=le(a).length,n=me(a,t);if(0<o%n)throw"numComponents "+n+" not correct for length "+o;return o/n}function le(e){return e.length?e:e.data}function me(e,t){return e.num||e.size||ae(t,le(e).length)}function pe(e,t,r,i){const a=e.createTexture();if(!a)throw"Failed to create texture object";const o=t.target||tt,n=t.format||it,s=t.informat||n,u=t.type||Oe;return e.bindTexture(o,a),r&&i&&e.texImage2D(o,0,s,r,i,0,n,u,null),e.texParameteri(o,e.TEXTURE_MIN_FILTER,t.min||ot),e.texParameteri(o,e.TEXTURE_MAG_FILTER,t.mag||ot),e.texParameteri(o,e.TEXTURE_WRAP_T,t.wrapT||at),e.texParameteri(o,e.TEXTURE_WRAP_S,t.wrapS||at),a}function ce(e,t,r){function a(r,i,a){e.texImage2D(i,0,it,1,1,0,it,Oe,new Uint8Array([0,0,255,255]));const l=new Image;l.onload=function(){!t.flipY||e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.bindTexture(o,d),e.texImage2D(i,0,s,n,u,l),a&&a()},fe(l,r)}const o=t.target||tt,n=t.format||it,s=t.informat||n,u=t.type||Oe,d=pe(e,t),l=t.src;if("string"==typeof l){if(o!=tt)throw"the target must be gl.TEXTURE_2D";a(t.src,o,function(){e.generateMipmap(o),e.bindTexture(o,null),r&&r(d)})}else if(Array.isArray(l)&&6===l.length&&"string"==typeof l[0]){if(o!=rt)throw"the target must be gl.TEXTURE_CUBE_MAP";let t=l.length;l.forEach((n,s)=>{a(n,e.TEXTURE_CUBE_MAP_POSITIVE_X+s,function(){t--,0>=t&&(e.generateMipmap(o),e.bindTexture(o,null),r&&r(d))})})}return e.bindTexture(o,null),d}function fe(e,t){t=-1<t.search("http")?t:location.origin+t,new URL(t).origin!==window.location.origin&&(e.crossOrigin=""),e.src=t}function _e(){const e=function(e){if(e.lengthComputable){let t=100*(e.loaded/e.total);bt.innerHTML=xe(t,2)+"% downloaded"}};return new Promise((t,r)=>{ze.load("../model/plane.mtl",function(i){console.log(i),Me.load("../model/plane.obj",function(e){this.setMaterial(e,i),console.log(e),t([i,e]),bt.style.display="none"},e,r)},null,r)})}function ve(e){let t,r={};for(let i in e)t=e[i],(t.map||t.specularMap||t.bumpMap)&&(r[i]=r[i]||{},t.map&&(r[i].map=ce(xt,t.map)),t.specularMap&&(r[i].specularMap=ce(xt,t.specularMap)),t.bumpMap&&(r[i].bumpMap=ce(xt,t.bumpMap)));return r}let Ee=Float32Array,Te=Float32Array;const Ae=e(),Le=e(),Se=e();var Me=function(){return{options:{},load:function(e,t,r,i){var a=this;return L(e,function(e){var r=E(e);t.call(a,r)},r,i),a},setMaterial:function(e,t){var r;return e.children.forEach(e=>{e.opacity=1,e.materials.forEach(a=>{if(r=t[a.name],r.map&&r.map.scale&&e.attributes&&e.attributes.texcoord)for(var o=r.map.scale.x,n=r.map.scale.y,s=e.attributes.texcoord.data,u=s.length,d=0;d<u;d+=2)s[d]*=o,s[d+1]*=n;for(var l in r)a[l]=r[l];a.opacity<e.opacity&&(e.opacity=a.opacity)})}),e},set:function(e){return Object.assign(this.options,e),this},parse:E}}(),ze=function(){return{options:{},load:function(e,t,r,i){var a=this.options;return L(e,function(e){t(A(e,a))},r,i),this},set:function(e){return Object.assign(this.options,e),this},parse:A}}(),Ie=/^[og]\s*(.+)?/,Ce=/^mtllib /,Ne=/^usemtl /;const Re=5120,Oe=5121,De=5122,Fe=5123,Ve=5126,Pe=35664,Be=35665,Ue=35666,je=5124,we=35667,Ge=35668,Xe=35669,ke=35670,He=35671,We=35672,Ye=35673,qe=35674,Je=35675,Ke=35676,Qe=5125,Ze=36294,$e=36295,et=36296,tt=3553,rt=34067,it=6408,at=10497,ot=9729,nt={};nt[Ve]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},nt[Pe]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},nt[Be]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},nt[Ue]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},nt[je]={Type:Int32Array,size:4,setter:M,arraySetter:z},nt[we]={Type:Int32Array,size:8,setter:I},nt[Ge]={Type:Int32Array,size:12,setter:C},nt[Xe]={Type:Int32Array,size:16,setter:N},nt[Qe]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},nt[Ze]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},nt[$e]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},nt[et]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},nt[ke]={Type:Uint32Array,size:4,setter:M,arraySetter:z},nt[He]={Type:Uint32Array,size:8,setter:I},nt[We]={Type:Uint32Array,size:12,setter:C},nt[Ye]={Type:Uint32Array,size:16,setter:N},nt[qe]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},nt[Je]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},nt[Ke]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},nt[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},nt[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},nt[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},nt[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},nt[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},nt[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},nt[35678]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:tt},nt[35680]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:rt},nt[35679]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:32879},nt[36289]={Type:null,size:0,setter:R,arraySetter:O,bindPoint:35866};const st={};st[Ve]={size:4,setter:D},st[Pe]={size:8,setter:D},st[Be]={size:12,setter:D},st[Ue]={size:16,setter:D},st[je]={size:4,setter:F},st[we]={size:8,setter:F},st[Ge]={size:12,setter:F},st[Xe]={size:16,setter:F},st[Qe]={size:4,setter:V},st[Ze]={size:8,setter:V},st[$e]={size:12,setter:V},st[et]={size:16,setter:V},st[ke]={size:4,setter:F},st[He]={size:8,setter:F},st[We]={size:12,setter:F},st[Ye]={size:16,setter:F},st[qe]={size:4,setter:P,count:2},st[Je]={size:9,setter:P,count:3},st[Ke]={size:16,setter:P,count:4};const ut={addExtensionsToContext:!0,attribPrefix:e=>"a"+e[0].toUpperCase()+e.substr(1)};let dt;const lt=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"],mt=function(){function e(e){const i=e.constructor.name;if(!t[i]){for(const t in e)if("number"==typeof e[t]){const i=r[e[t]];r[e[t]]=i?`${i} | ${t}`:t}t[i]=!0}}const t={},r={};return function(t,i){return e(t),r[i]||"0x"+i.toString(16)}}(),pt=/^(.*?)_/,ct=/coord|texture/i,ft=/color|colour/i,_t=["position","positions","a_position"];const vt=document.getElementById("canvas"),xt=function(e,t){const r=["webgl","experimental-webgl"];let a=null;for(let o=0,i=r.length;o<i;o++)if(a=e.getContext(r[o],t),a){ut.addExtensionsToContext&&G(a);break}return a}(vt,!0),bt=document.getElementsByTagName("h3")[0],gt=[-10,10,-15],ht=[.9,.9,.9],yt=[.5,.5,.5];(async function(){if(!xt)return;const e=Y(xt,"#define GLSLIFY 1\nattribute vec4 aPosition; \nattribute vec4 aNormal;//\u6CD5\u5411\u91CF\nattribute vec2 aTexcoord;//\u7EB9\u7406\u5750\u6807\nuniform mat4 u_vpMatrix;//vp\u77E9\u9635\nuniform mat4 u_modelMatrix;//\u6A21\u578B\u77E9\u9635\nvarying vec3 v_normal;//\u6CD5\u5411\u91CF\nvarying vec3 v_position;\nvarying vec2 v_texcoord;\n\nvoid main() { \n    v_position = vec3(u_modelMatrix * aPosition);\n    v_texcoord = aTexcoord;\n    v_normal = vec3(u_modelMatrix * aNormal);\n    gl_Position  = u_vpMatrix * u_modelMatrix * aPosition;\n}","#extension GL_OES_standard_derivatives : enable\nprecision highp float;\n#define GLSLIFY 1\nuniform vec3 u_viewPosition;\nuniform vec3 u_lightPosition;\nuniform vec3 u_lightColor;\nuniform vec3 u_ambientColor;\nuniform vec4 u_color;\nuniform vec3 u_specularColor;\nuniform float u_shininess;\nuniform bvec3 u_useMaps;\nuniform sampler2D u_diffMap;\nuniform sampler2D u_specMap;\nuniform sampler2D u_normMap;\nuniform float u_bumpScale;\nvarying vec3 v_position;\nvarying vec2 v_texcoord;\nvarying vec3 v_normal;\nconst float constantAtt = 1.0;\nconst float linearAtt = 0.14;\nconst float quadraticAtt = 0.07;\nconst float gamma = 2.2;\nvec2 dHdxy_fwd_1540259130(sampler2D bumpMap, vec2 texcoord, float bump_scale) {\n    vec2 dSTdx = dFdx(texcoord);\n    vec2 dSTdy = dFdy(texcoord);\n    float Hll = bump_scale * texture2D( bumpMap, texcoord ).x;\n    float dBx = bump_scale * texture2D( bumpMap, texcoord + dSTdx ).x - Hll;\n    float dBy = bump_scale * texture2D( bumpMap, texcoord + dSTdy ).x - Hll;\n    return vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n    vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n    vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n    vec3 vN = surf_norm;\n    vec3 R1 = cross( vSigmaY, vN );\n    vec3 R2 = cross( vN, vSigmaX );\n    float fDet = dot( vSigmaX, R1 );\n    fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n    vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n    return normalize( abs( fDet ) * surf_norm - vGrad );\n}\nvec3 getNormal(sampler2D bumpMap, vec2 texcoord, vec3 surf_pos, vec3 surf_norm, float bump_scale){\n    return perturbNormalArb(-surf_pos, surf_norm, dHdxy_fwd_1540259130(bumpMap, texcoord, bump_scale));\n}\n\nvoid main() {\n    vec3 normal = normalize(v_normal);\n    if(u_useMaps.z){\n        normal = getNormal(u_normMap, v_texcoord, v_position, normal, u_bumpScale);\n    }\n\n    // \u5149\u7EBF\u65B9\u5411\n    vec3 lightDirection = normalize(u_lightPosition - v_position);\n    // \u5149\u7EBF\u65B9\u5411\u548C\u6CD5\u5411\u91CF\u5939\u89D2\n    float nDotL = max(dot(lightDirection, normal), 0.0);\n    // \u5149\u5F3A\u8870\u51CF\n    float att = 0.0;\n    if(nDotL > 0.0){\n        float dis = length(u_lightPosition - v_position);\n        att = 1.0/(constantAtt + linearAtt * dis + quadraticAtt * dis * dis);\n    }\n    \n    // \u6F2B\u53CD\u5C04\u5149\u4EAE\u5EA6\n    vec4 diffuseColor = !u_useMaps.x ? u_color : texture2D(u_diffMap, v_texcoord);\n    vec3 diffuse = u_lightColor * nDotL * diffuseColor.rgb;\n    // \u73AF\u5883\u5149\u4EAE\u5EA6\n    vec3 ambient = u_ambientColor * diffuseColor.rgb;\n\n    // \u89C2\u5BDF\u65B9\u5411\n    vec3 eyeDirection = normalize(u_viewPosition - v_position);\n    // \u955C\u9762\u53CD\u5C04\n    vec3 halfwayDir = normalize(lightDirection + eyeDirection);\n    float specularIntensity = pow(max(dot(normal, halfwayDir), 0.0), u_shininess);\n    vec3 specular = (!u_useMaps.y ? u_specularColor : texture2D(u_specMap, v_texcoord).rgb ) * specularIntensity;\n    \n    // vec3 mapped = pow(ambient + diffuse + specular, vec3(1.0 / gamma));\n\n    gl_FragColor = vec4(ambient + diffuse + specular, diffuseColor.a);\n}"),[t,r]=await _e(),i=ve(t),a=r.children.map(t=>{const r=$(xt,t.attributes);return t.vao=re(xt,e,r),t});let o=[],n=[];a.forEach(e=>{1>e.opacity?n.push(e):o.push(e)}),n.sort((e,t)=>e.opacity-t.opacity),xt.clearColor(0,0,0,1),xt.enable(xt.DEPTH_TEST),xt.enable(xt.CULL_FACE),b(vt),xt.viewport(0,0,vt.width,vt.height),xt.useProgram(e.program);const s=u(),c=u(),f=m(he/6,vt.width/vt.height,1,50),_=h(vt,[-10,10,10],2,40),v=u();K(e,{u_lightPosition:gt,u_lightColor:ht,u_ambientColor:yt,u_bumpScale:.5}),function t(){function r(t){Q(xt,e,t.vao),t.group.forEach(async r=>{const a=t.materials[r.index],o=[!1,!1,!1],n={};a.map&&(o[0]=!0,n.u_diffMap=i[a.name].map),a.specularMap&&(o[1]=!0,n.u_specMap=i[a.name].specularMap),a.bumpMap&&(o[2]=!0,n.u_normMap=i[a.name].bumpMap),1>a.opacity&&!xt.isEnabled(xt.BLEND)?(xt.depthMask(!1),xt.enable(xt.BLEND),xt.blendFunc(xt.SRC_ALPHA,xt.ONE_MINUS_SRC_ALPHA)):1<=a.opacity&&xt.isEnabled(xt.BLEND)&&(xt.depthMask(!0),xt.disable(xt.BLEND)),Object.assign(n,{u_color:a.color,u_specularColor:a.specular,u_shininess:a.shininess,u_useMaps:o}),K(e,n),xt.drawArrays(xt.TRIANGLES,r.start,r.count)})}const a=_();p(a,[0,0,0],[0,1,0],c),l(f,d(c),s),K(e,{u_vpMatrix:s,u_viewPosition:a,u_modelMatrix:v}),xt.clear(xt.COLOR_BUFFER_BIT|xt.DEPTH_BUFFER_BIT),o.forEach(r),n.forEach(r),xt.bindVertexArray(null),requestAnimationFrame(t)}()})()})();
